{% extends 'base.html.twig' %}

{% block title %}Détails Salle - {{ nomsalle }}
{% endblock %}

{% block navlink %}
    <li><a class="nav-link" href="/connexion">Connexion</a></li>
    <li><a class="nav-link" href="/">Accueil</a></li>
{% endblock %}


{% block appcontent %}

    <div class="app-content tableau-de-bord details-salle">
        <div class="title">
            <a class="return-arrow" href="/">
                <svg xmlns="http://www.w3.org/2000/svg" width="47" height="40" viewBox="0 0 47 40" fill="none">
                    <path d="M9.63677 21.6039H6.64587L8.74729 23.7322L20.8538 35.9933C21.151 36.2943 21.3207 36.706 21.3207 37.1385C21.3207 37.571 21.151 37.9826 20.8538 38.2836C20.5572 38.5841 20.1584 38.7499 19.746 38.7499C19.3336 38.7499 18.9347 38.5841 18.6381 38.2836L1.71895 21.145L1.71742 21.1435C1.57029 20.9949 1.4527 20.8176 1.37219 20.6212C1.29166 20.4247 1.25 20.2135 1.25 19.9999C1.25 19.7862 1.29166 19.575 1.37219 19.3786C1.45271 19.1821 1.57029 19.0048 1.71742 18.8563L1.71894 18.8547L18.6381 1.71612L17.7538 0.843108L18.6381 1.71612C18.7851 1.56724 18.9587 1.45001 19.1486 1.37033C19.3385 1.29066 19.5414 1.24987 19.746 1.24987C19.9505 1.24987 20.1535 1.29066 20.3433 1.37033C20.5332 1.45001 20.7069 1.56724 20.8538 1.71612L21.7412 0.840088L20.8538 1.71612C21.0008 1.86504 21.1183 2.0427 21.1987 2.23937C21.2792 2.43606 21.3207 2.64743 21.3207 2.86126C21.3207 3.07509 21.2792 3.28646 21.1987 3.48316C21.1183 3.67982 21.0008 3.85748 20.8538 4.00639L8.74746 16.2626L6.64506 18.3911H9.63677H44.1801C44.5913 18.3911 44.9888 18.5563 45.2845 18.8559C45.5807 19.1559 45.75 19.5663 45.75 19.9975C45.75 20.4287 45.5807 20.8391 45.2845 21.1391C44.9888 21.4386 44.5913 21.6039 44.1801 21.6039H9.63677Z" fill="white" stroke="white" stroke-width="2.5"/>
                </svg>
            </a>
            <h3>{{ nomsalle }}</h3>
        </div>

        {# -------------------------------------------------- #}

        {# CONTAINER (données générales) #}
        <div class="container widget-dg">
            <div class="title">
                <h4>Données instantanées</h4>
                <p>{{ elapsed != null ? 'il y a ' ~ elapsed : 'Aucunes données reçues pour le moment...' }}</p>
            </div>
            <div class="donnees">
                <div class="donnee">
                    <svg xmlns="http://www.w3.org/2000/svg" width="77" height="77" viewBox="0 0 77 77" fill="none">
                        <path d="M38.5 70.5833C31.1743 70.5833 25.0646 68.0701 20.1708 63.0437C15.277 58.0173 12.8312 51.7611 12.8333 44.275C12.8333 40.9597 13.5819 37.6444 15.0792 34.3291C16.5764 31.0139 18.4479 27.8323 20.6937 24.7844C22.9396 21.7364 25.3726 18.8757 27.9927 16.2021C30.6128 13.5285 33.0458 11.2024 35.2917 9.22394C35.7194 8.79616 36.2146 8.48923 36.7771 8.30315C37.3396 8.11706 37.9139 8.02295 38.5 8.02081C39.0882 8.02081 39.6625 8.11492 40.2229 8.30315C40.7833 8.49137 41.2784 8.7983 41.7083 9.22394C43.9542 11.2024 46.3871 13.5285 49.0073 16.2021C51.6274 18.8757 54.0604 21.7364 56.3062 24.7844C58.5521 27.8323 60.4236 31.0139 61.9208 34.3291C63.418 37.6444 64.1667 40.9597 64.1667 44.275C64.1667 51.7611 61.7198 58.0173 56.826 63.0437C51.9322 68.0701 45.8235 70.5833 38.5 70.5833ZM46.5208 57.75C47.8576 57.75 48.9945 57.2816 49.9313 56.3447C50.8681 55.4079 51.3355 54.2721 51.3333 52.9375C51.3333 51.6007 50.8649 50.4639 49.9281 49.527C48.9912 48.5902 47.8555 48.1228 46.5208 48.125C45.184 48.125 44.0472 48.5934 43.1104 49.5302C42.1735 50.4671 41.7062 51.6028 41.7083 52.9375C41.7083 54.2743 42.1767 55.4111 43.1136 56.3479C44.0504 57.2848 45.1862 57.7521 46.5208 57.75ZM28.0729 55.3437C28.7146 55.9854 29.4632 56.3062 30.3187 56.3062C31.1743 56.3062 31.9229 55.9854 32.5646 55.3437L48.9271 38.9812C49.5687 38.3396 49.8896 37.591 49.8896 36.7354C49.8896 35.8798 49.5687 35.1312 48.9271 34.4896C48.2854 33.8479 47.5229 33.5271 46.6395 33.5271C45.7562 33.5271 44.9947 33.8479 44.3552 34.4896L28.0729 50.7719C27.4312 51.4135 27.1104 52.176 27.1104 53.0594C27.1104 53.9428 27.4312 54.7042 28.0729 55.3437ZM30.4792 41.7083C31.816 41.7083 32.9528 41.2399 33.8896 40.3031C34.8265 39.3662 35.2938 38.2305 35.2917 36.8958C35.2917 35.559 34.8232 34.4222 33.8864 33.4854C32.9496 32.5485 31.8138 32.0812 30.4792 32.0833C29.1424 32.0833 28.0055 32.5517 27.0687 33.4886C26.1319 34.4254 25.6645 35.5611 25.6667 36.8958C25.6667 38.2326 26.1351 39.3694 27.0719 40.3063C28.0087 41.2431 29.1445 41.7105 30.4792 41.7083Z" fill="#BABABA"/>
                    </svg>
                    {% if dernieres_donnees.hum == 0 or  dernieres_donnees.hum == 100 %}
                        <h4 style="color: red">
                            {{ dernieres_donnees.hum | default('--') }}%
                        </h4>
                    {% elseif dernieres_donnees.hum < 40 or dernieres_donnees.hum > 70 %}
                        <h4 style="color: orange">
                            {{ dernieres_donnees.hum | default('--') }}%
                        </h4>
                    {% else %}
                        <h4>
                            {{ dernieres_donnees.hum | default('--') }}%
                        </h4>
                    {% endif %}
                    <p>Humidité</p>
                </div>

                <div class="donnee">
                    <svg xmlns="http://www.w3.org/2000/svg" width="77" height="77" viewBox="0 0 77 77" fill="none">
                        <path d="M48.125 41.7084V16.0417C48.125 13.489 47.1109 11.0408 45.3059 9.23578C43.5008 7.43075 41.0527 6.41669 38.5 6.41669C35.9473 6.41669 33.4991 7.43075 31.6941 9.23578C29.889 11.0408 28.875 13.489 28.875 16.0417V41.7084C26.1815 43.7285 24.1919 46.5449 23.188 49.7586C22.1841 52.9723 22.2168 56.4204 23.2815 59.6145C24.3462 62.8086 26.3889 65.5867 29.1203 67.5554C31.8516 69.524 35.1331 70.5834 38.5 70.5834C41.8668 70.5834 45.1484 69.524 47.8797 67.5554C50.611 65.5867 52.6537 62.8086 53.7184 59.6145C54.7831 56.4204 54.8159 52.9723 53.812 49.7586C52.8081 46.5449 50.8185 43.7285 48.125 41.7084ZM38.5 12.8334C39.3509 12.8334 40.1669 13.1714 40.7686 13.7731C41.3703 14.3747 41.7083 15.1908 41.7083 16.0417V25.6667H35.2916V16.0417C35.2916 15.1908 35.6297 14.3747 36.2313 13.7731C36.833 13.1714 37.6491 12.8334 38.5 12.8334Z" fill="#BABABA"/>
                    </svg>
                    {% if dernieres_donnees.temp < intervalleTempSaison[0] or  dernieres_donnees.temp > intervalleTempSaison[3] %}
                        <h4 style="color: red">
                            {{ dernieres_donnees.temp | default('--') }}°C
                        </h4>
                    {% elseif dernieres_donnees.temp < intervalleTempSaison[1] or dernieres_donnees.temp > intervalleTempSaison[2] %}
                        <h4 style="color: orange">
                            {{ dernieres_donnees.temp | default('--') }}°C
                        </h4>
                    {% else %}
                        <h4>
                            {{ dernieres_donnees.temp | default('--') }}°C
                        </h4>
                    {% endif %}

                    <p>Température</p>
                </div>

                <div class="donnee">
                    <svg xmlns="http://www.w3.org/2000/svg" width="77" height="77" viewBox="0 0 77 77" fill="none">
                        <path d="M42.35 26.95C51.8402 26.95 57.2225 33.0099 58.0041 40.3249H58.2428C64.3489 40.3249 69.3 45.0874 69.3 50.9625C69.3 56.8376 64.3489 61.6 58.2428 61.6H26.4572C20.3511 61.6 15.4 56.8376 15.4 50.9625C15.4 45.0874 20.3511 40.3249 26.4572 40.3249H26.6959C27.4851 32.9599 32.8597 26.95 42.35 26.95ZM32.3092 15.4C37.9148 15.4 42.8043 18.5878 45.2182 23.2733C44.2666 23.1566 43.3087 23.0987 42.35 23.1C33.1485 23.1 26.4418 28.132 24.0471 35.7511L23.8084 36.575L23.6313 37.295L22.996 37.4105C20.6711 37.884 18.4994 38.9257 16.6749 40.4426C14.8503 41.9595 13.4296 43.9044 12.5394 46.1038C10.7053 44.9863 9.27543 43.313 8.45758 41.3272C7.63972 39.3413 7.47655 37.1463 7.99179 35.0613C8.50702 32.9763 9.6738 31.11 11.3225 29.7337C12.9712 28.3573 15.016 27.5427 17.1594 27.4082L18.0141 27.3889C18.6078 24.0291 20.3661 20.9859 22.9803 18.7934C25.5944 16.601 28.8974 15.3996 32.3092 15.4Z" fill="#BABABA"/>
                    </svg>
                    {% if dernieres_donnees.co2 > 1500 or dernieres_donnees.co2 < 400 %}
                        <h4 style="color: red">
                            {{ dernieres_donnees.co2 | default('---') }}ppm
                        </h4>
                    {% elseif dernieres_donnees.co2 >= 1000 %}
                        <h4 style="color: orange">
                            {{ dernieres_donnees.co2 | default('---') }}ppm
                        </h4>
                    {% else %}
                        <h4>
                            {{ dernieres_donnees.co2 | default('---') }}ppm
                        </h4>
                    {% endif %}
                    <p>Taux de carbone</p>
                </div>
            </div>
        </div>

        {# Recommandations #}
        <div class="title">
            <h3>RECOMMANDATIONS</h3>
        </div>

        <div class="container recommandations">
            <h4>{{ recommandations[0] }}</h4>
            {%  if recommandations[0] == "Bonne ambiance" %}
                <div class="recommandation green">
                    <p>Aucune action nécéssaire pour cette salle.</p>
                    <svg xmlns="http://www.w3.org/2000/svg" width="39" height="39" viewBox="0 0 39 39" fill="none">
                        <path d="M16.2914 22.2652L16.645 22.6187L16.9985 22.2651L25.8359 13.4261L27.4282 15.0184L16.6449 25.8032L10.4571 19.6139L12.0478 18.0232L16.2914 22.2652Z" fill="white" stroke="white"/>
                        <path d="M2.125 19.5C2.125 9.90427 9.90427 2.125 19.5 2.125C29.0957 2.125 36.875 9.90427 36.875 19.5C36.875 29.0957 29.0957 36.875 19.5 36.875C9.90427 36.875 2.125 29.0957 2.125 19.5ZM13.7119 33.4737C15.547 34.2338 17.5138 34.625 19.5 34.625C23.5114 34.625 27.3585 33.0315 30.195 30.195C33.0315 27.3585 34.625 23.5114 34.625 19.5C34.625 15.4886 33.0315 11.6415 30.195 8.80501C27.3585 5.96852 23.5114 4.375 19.5 4.375C17.5138 4.375 15.547 4.76622 13.7119 5.52632C11.8769 6.28642 10.2095 7.40052 8.80501 8.80501C7.40052 10.2095 6.28642 11.8769 5.52632 13.7119C4.76622 15.547 4.375 17.5138 4.375 19.5C4.375 21.4862 4.76622 23.453 5.52632 25.2881C6.28642 27.1231 7.40052 28.7905 8.80501 30.195C10.2095 31.5995 11.8769 32.7136 13.7119 33.4737Z" fill="white" stroke="white"/>
                    </svg>
                </div>
            {% endif %}
            {% for reco in recommandations[1] %}
                <div class="recommandation red">
                    <p>{{ reco[0] }}</p>
                    {% if reco[1] == 1 %}
                        <svg xmlns="http://www.w3.org/2000/svg" width="39" height="39" viewBox="0 0 39 39" fill="none">
                            <path d="M8.125 3.25H26C27.2929 3.25 28.5329 3.76361 29.4471 4.67785C30.3614 5.59209 30.875 6.83207 30.875 8.125V30.875C30.875 31.306 30.7038 31.7193 30.399 32.024C30.0943 32.3288 29.681 32.5 29.25 32.5H24.375" stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M19.5 19.5V22.75M8.125 3.25L20.4555 5.71675C21.5605 5.93761 22.5549 6.53446 23.2694 7.40576C23.984 8.27707 24.3747 9.36902 24.375 10.4959V33.7675C24.3749 34.0078 24.3214 34.2451 24.2185 34.4623C24.1156 34.6795 23.9658 34.8711 23.7799 35.0235C23.594 35.1758 23.3767 35.285 23.1435 35.3432C22.9103 35.4013 22.6672 35.4071 22.4315 35.36L10.738 33.0233C10.001 32.8759 9.33778 32.4777 8.86135 31.8964C8.38492 31.3151 8.1247 30.5866 8.125 29.835V3.25Z" stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    {% elseif reco[1] == 2 %}
                        <svg xmlns="http://www.w3.org/2000/svg" width="39" height="39" viewBox="0 0 39 39" fill="none">
                            <path d="M36.0826 20.414C35.7198 19.0581 35.0684 17.7964 34.1731 16.7154C33.2777 15.6343 32.1595 14.7594 30.8949 14.1503C29.6303 13.5412 28.249 13.2123 26.8456 13.1862C25.4422 13.16 24.0497 13.4372 22.7632 13.9988L24.9296 5.35027C25.0218 4.97925 24.9955 4.58864 24.8542 4.23338C24.7129 3.87812 24.4638 3.5761 24.1419 3.3698C22.0112 2.0193 19.4399 1.54725 16.9684 2.05282C14.4969 2.55839 12.3175 4.00223 10.8882 6.08097C9.45896 8.15971 8.89102 10.7115 9.30376 13.2002C9.7165 15.6889 11.0778 17.9208 13.1016 19.4268L4.52768 21.875C4.15921 21.9803 3.83316 22.1988 3.5956 22.4995C3.35804 22.8002 3.22099 23.1679 3.20381 23.5508C3.0752 26.0868 3.94108 28.573 5.61728 30.4805C7.29348 32.388 9.64773 33.5663 12.1793 33.7648C14.7108 33.9632 17.22 33.1662 19.1729 31.5432C21.1259 29.9202 22.3686 27.5993 22.6368 25.0742L29.0352 31.2746C29.311 31.54 29.6631 31.7122 30.0419 31.7669C30.4207 31.8215 30.8072 31.7559 31.1467 31.5793C33.1175 30.558 34.6808 28.8949 35.5783 26.8647C36.4758 24.8346 36.6537 22.559 36.0826 20.414ZM17.6719 19.5C17.6719 19.1384 17.7791 18.7849 17.98 18.4843C18.1809 18.1837 18.4664 17.9494 18.8004 17.811C19.1345 17.6726 19.502 17.6364 19.8567 17.707C20.2113 17.7775 20.537 17.9516 20.7927 18.2073C21.0484 18.4629 21.2225 18.7887 21.293 19.1433C21.3636 19.4979 21.3274 19.8655 21.189 20.1995C21.0506 20.5336 20.8163 20.8191 20.5157 21.02C20.215 21.2209 19.8616 21.3281 19.5 21.3281C19.0152 21.3281 18.5502 21.1355 18.2073 20.7926C17.8645 20.4498 17.6719 19.9848 17.6719 19.5ZM18.8906 5.48433C19.6189 5.48433 20.3413 5.61487 21.0235 5.86976L18.9821 14.0415C18.2018 14.116 17.4465 14.3568 16.7672 14.7479C16.0879 15.1389 15.5003 15.671 15.044 16.3084C14.0664 15.5144 13.3588 14.4372 13.0186 13.2247C12.6783 12.0122 12.722 10.7241 13.1437 9.53749C13.5654 8.35088 14.3444 7.32405 15.3735 6.59825C16.4026 5.87244 17.6313 5.48329 18.8906 5.48433ZM15.9961 29.2652C15.143 29.7589 14.1828 30.0383 13.1979 30.0794C12.2131 30.1205 11.2329 29.922 10.3416 29.5011C9.4503 29.0802 8.6744 28.4493 8.08048 27.6626C7.48656 26.8759 7.09235 25.9569 6.93166 24.9843L15.0333 22.6702C15.487 23.31 16.0726 23.8451 16.7506 24.2393C17.4286 24.6335 18.1833 24.8777 18.9638 24.9554C18.8219 25.8496 18.4818 26.7008 17.9683 27.4465C17.4548 28.1923 16.7809 28.8137 15.9961 29.2652ZM31.9465 25.9807C31.5822 26.6134 31.1069 27.1754 30.5434 27.6397L24.4862 21.7851C24.8132 21.0724 24.9831 20.2978 24.9844 19.5137C24.9857 18.7297 24.8184 17.9545 24.4938 17.2407C25.6702 16.7916 26.9568 16.7179 28.1767 17.0298C29.3966 17.3417 30.4899 18.0238 31.3064 18.9824C32.1228 19.9409 32.6223 21.1289 32.7361 22.3829C32.8499 23.6369 32.5725 24.8953 31.9419 25.9852L31.9465 25.9807Z" fill="white"/>
                        </svg>
                    {% elseif reco[1] == 3 %}
                        <svg xmlns="http://www.w3.org/2000/svg" width="39" height="39" viewBox="0 0 39 39" fill="none">
                            <path d="M34.125 32.5V3.25H4.875V32.5H1.625V37.375H37.375V32.5M30.875 6.5V17.875H27.625V6.5M8.125 6.5H11.375V17.875H8.125M8.125 32.5V21.125H11.375V32.5M14.625 32.5V6.5H24.375V32.5M27.625 32.5V21.125H30.875V32.5H27.625Z" fill="white"/>
                        </svg>
                    {% elseif reco[1] == 4 %}
                        <svg xmlns="http://www.w3.org/2000/svg" width="40" height="39" viewBox="0 0 40 39" fill="none">
                            <path d="M18.3333 13C21.6667 8.125 15 8.125 18.3333 3.25M25.8333 13C29.1667 8.125 22.5 8.125 25.8333 3.25M10 16.25H10.0167M10 22.75H10.0167M16.6667 26V19.5M23.3333 26V19.5M30 26V19.5" stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M33.3333 9.75C34.2174 9.75 35.0652 10.0924 35.6903 10.7019C36.3155 11.3114 36.6666 12.138 36.6666 13V29.25C36.6666 30.112 36.3155 30.9386 35.6903 31.5481C35.0652 32.1576 34.2174 32.5 33.3333 32.5H6.66665C5.78259 32.5 4.93474 32.1576 4.30962 31.5481C3.6845 30.9386 3.33331 30.112 3.33331 29.25V13C3.33331 12.138 3.6845 11.3114 4.30962 10.7019C4.93474 10.0924 5.78259 9.75 6.66665 9.75H11.6666M8.33331 32.5V35.75M31.6666 32.5V35.75" stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    {% endif %}
                </div>
            {% endfor %}
        </div>

        {# -------------------------------------------------- #}
    </div>
{% endblock %}

{% block javascripts %}
    <script src="{{ asset('js/iconConnexion.js') }}"></script>
{% endblock %}
