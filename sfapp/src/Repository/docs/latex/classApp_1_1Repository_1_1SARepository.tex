\doxysection{App\textbackslash{}Repository\textbackslash{}SARepository Class Reference}
\hypertarget{classApp_1_1Repository_1_1SARepository}{}\label{classApp_1_1Repository_1_1SARepository}\index{App\textbackslash{}Repository\textbackslash{}SARepository@{App\textbackslash{}Repository\textbackslash{}SARepository}}
Inheritance diagram for App\textbackslash{}Repository\textbackslash{}SARepository\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classApp_1_1Repository_1_1SARepository}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classApp_1_1Repository_1_1SARepository_a19edd7010a766357af3f82d4dcfd03ce}{\+\_\+\+\_\+construct}} (Manager\+Registry \$registry)
\item 
\mbox{\hyperlink{classApp_1_1Repository_1_1SARepository_a627c48c1362785706d60fd86cfbd2dfe}{compte\+SASans\+Experimentation}} ()
\item 
\mbox{\hyperlink{classApp_1_1Repository_1_1SARepository_a70f731d8af704e3efa505a079255ed3c}{sa\+Non\+Utiliser}} ()
\item 
\mbox{\hyperlink{classApp_1_1Repository_1_1SARepository_a801c7dbf106a9f1a800dc4ad2b35499e}{suppression\+Exp}} (SA \$sa)
\item 
\mbox{\hyperlink{classApp_1_1Repository_1_1SARepository_a2a7adda15cbf723b9b6c7a693d21fedc}{trier\+SA}} (array \$resultat)
\item 
\mbox{\hyperlink{classApp_1_1Repository_1_1SARepository_a2e1d2cf6f7c95e62ef70727aec1b6216}{tout\+Les\+SA}} ()
\item 
\mbox{\hyperlink{classApp_1_1Repository_1_1SARepository_aa3a7b3b4f3ecf780bbfa44293ffd9354}{filtrer\+SAGestion\+SA}} (array \$etat=null, array \$localisation=null)
\item 
\mbox{\hyperlink{classApp_1_1Repository_1_1SARepository_a3ce83eb2e12e9eb8d383cbc8a09b7965}{recherche\+SA}} (string \$contient\+\_\+ce\+\_\+string=null)
\item 
\mbox{\hyperlink{classApp_1_1Repository_1_1SARepository_aeca96b57b666f992593f65d4179458b2}{ajout\+SA}} (string \$nom=null)
\item 
\mbox{\hyperlink{classApp_1_1Repository_1_1SARepository_af1f27e603657272f9de148cc117dd01f}{existe\+Deja}} (string \$nom=null)
\item 
\mbox{\hyperlink{classApp_1_1Repository_1_1SARepository_ad93bff6f868bbd978e5a2edc30b833ad}{supprimer\+SA}} (string \$nomsa)
\item 
\mbox{\hyperlink{classApp_1_1Repository_1_1SARepository_a864e06189eddcaa6061ccaa8ab4ad1bf}{changer\+Etat\+SA}} (string \$nomsalle, Etat\+SA \$etat)
\item 
\mbox{\hyperlink{classApp_1_1Repository_1_1SARepository_aecb670e0cbff773c408b1d6f63ea0a03}{salle\+\_\+associe\+\_\+sa}} (string \$nomsa)
\item 
\mbox{\hyperlink{classApp_1_1Repository_1_1SARepository_a99f77f946dd0d327313783f9788b3f2c}{sa\+\_\+eteint\+\_\+probleme}} (array \$liste\+Salles\+Avec\+Donnees)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Repository pour gérer les opérations de base de données liées aux entités SA (Système d\textquotesingle{}Automatisation). $<$\+SA$>$

@method SA\texorpdfstring{$\vert$}{|}null find(\$id, \$lock\+Mode = null, \$lock\+Version = null) @method SA\texorpdfstring{$\vert$}{|}null find\+One\+By(array \$criteria, array \$order\+By = null) @method SA\mbox{[}\mbox{]} find\+All() @method SA\mbox{[}\mbox{]} find\+By(array \$criteria, array \$order\+By = null, \$limit = null, \$offset = null) 

Definition at line \mbox{\hyperlink{SARepository_8php_source_l00023}{23}} of file \mbox{\hyperlink{SARepository_8php_source}{SARepository.\+php}}.



\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classApp_1_1Repository_1_1SARepository_a19edd7010a766357af3f82d4dcfd03ce}\label{classApp_1_1Repository_1_1SARepository_a19edd7010a766357af3f82d4dcfd03ce} 
\index{App\textbackslash{}Repository\textbackslash{}SARepository@{App\textbackslash{}Repository\textbackslash{}SARepository}!\_\_construct@{\_\_construct}}
\index{\_\_construct@{\_\_construct}!App\textbackslash{}Repository\textbackslash{}SARepository@{App\textbackslash{}Repository\textbackslash{}SARepository}}
\doxysubsubsection{\texorpdfstring{\_\_construct()}{\_\_construct()}}
{\footnotesize\ttfamily App\textbackslash{}\+Repository\textbackslash{}\+SARepository\+::\+\_\+\+\_\+construct (\begin{DoxyParamCaption}\item[{Manager\+Registry}]{\$registry }\end{DoxyParamCaption})}

Constructeur de SARepository. Initialise le repository avec le manager d\textquotesingle{}entités Doctrine. 
\begin{DoxyParams}[1]{Parameters}
Manager\+Registry & {\em \$registry} & Le gestionnaire de l\textquotesingle{}entité Doctrine. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{SARepository_8php_source_l00030}{30}} of file \mbox{\hyperlink{SARepository_8php_source}{SARepository.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00031\ \ \ \ \ \{}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ parent::\_\_construct(\$registry,\ SA::class);}
\DoxyCodeLine{00033\ \ \ \ \ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classApp_1_1Repository_1_1SARepository_aeca96b57b666f992593f65d4179458b2}\label{classApp_1_1Repository_1_1SARepository_aeca96b57b666f992593f65d4179458b2} 
\index{App\textbackslash{}Repository\textbackslash{}SARepository@{App\textbackslash{}Repository\textbackslash{}SARepository}!ajoutSA@{ajoutSA}}
\index{ajoutSA@{ajoutSA}!App\textbackslash{}Repository\textbackslash{}SARepository@{App\textbackslash{}Repository\textbackslash{}SARepository}}
\doxysubsubsection{\texorpdfstring{ajoutSA()}{ajoutSA()}}
{\footnotesize\ttfamily App\textbackslash{}\+Repository\textbackslash{}\+SARepository\+::ajout\+SA (\begin{DoxyParamCaption}\item[{string}]{\$nom = {\ttfamily null} }\end{DoxyParamCaption})}

Ajoute un nouveau SA avec les informations spécifiées. 
\begin{DoxyParams}[1]{Parameters}
string | null & {\em \$nom} & Le nom du nouveau SA. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{SARepository_8php_source_l00246}{246}} of file \mbox{\hyperlink{SARepository_8php_source}{SARepository.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ \textcolor{keywordtype}{void}}
\DoxyCodeLine{00247\ \ \ \ \ \{}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ \$sa\ =\ \textcolor{keyword}{new}\ SA();}
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ \$sa-\/>setEtat(EtatSA::eteint);}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \$sa-\/>setNom(\$nom);}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \$sa-\/>setNumero(0);}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \$sa-\/>setDisponible(\textcolor{keyword}{true});}
\DoxyCodeLine{00253\ }
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Obtenez\ le\ gestionnaire\ d'entités\ et\ persistez\ l'entité}}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \$entityManager\ =\ \$this-\/>getEntityManager();}
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ \$entityManager-\/>persist(\$sa);}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \$entityManager-\/>flush();}
\DoxyCodeLine{00258\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classApp_1_1Repository_1_1SARepository_a864e06189eddcaa6061ccaa8ab4ad1bf}\label{classApp_1_1Repository_1_1SARepository_a864e06189eddcaa6061ccaa8ab4ad1bf} 
\index{App\textbackslash{}Repository\textbackslash{}SARepository@{App\textbackslash{}Repository\textbackslash{}SARepository}!changerEtatSA@{changerEtatSA}}
\index{changerEtatSA@{changerEtatSA}!App\textbackslash{}Repository\textbackslash{}SARepository@{App\textbackslash{}Repository\textbackslash{}SARepository}}
\doxysubsubsection{\texorpdfstring{changerEtatSA()}{changerEtatSA()}}
{\footnotesize\ttfamily App\textbackslash{}\+Repository\textbackslash{}\+SARepository\+::changer\+Etat\+SA (\begin{DoxyParamCaption}\item[{string}]{\$nomsalle,  }\item[{Etat\+SA}]{\$etat }\end{DoxyParamCaption})}

Change l\textquotesingle{}état d\textquotesingle{}un SA associé à une salle donnée. 
\begin{DoxyParams}[1]{Parameters}
string & {\em \$nomsalle} & Le nom de la salle associée au SA. \\
\hline
Etat\+SA & {\em \$etat} & Le nouvel état à attribuer au SA. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{SARepository_8php_source_l00297}{297}} of file \mbox{\hyperlink{SARepository_8php_source}{SARepository.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ \textcolor{keywordtype}{void}}
\DoxyCodeLine{00298\ \ \ \ \ \{}
\DoxyCodeLine{00299\ \ \ \ \ \ \ \ \ \$entityManager\ =\ \$this-\/>getEntityManager();}
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ \$experimentationsRepository\ =\ \$entityManager-\/>getRepository(Experimentation::class);}
\DoxyCodeLine{00301\ }
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Rechercher\ toutes\ les\ expérimentations\ liées\ à\ la\ salle\ avec\ le\ nom\ donné}}
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ \$experimentations\ =\ \$experimentationsRepository-\/>trouveExperimentationsParNomSalle(\$nomsalle);}
\DoxyCodeLine{00304\ }
\DoxyCodeLine{00305\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{foreach}\ (\$experimentations\ as\ \$experimentation)\ \{}
\DoxyCodeLine{00306\ \ \ \ \ \ \ \ \ \ \ \ \ \$sa\ =\ \$experimentation-\/>getSA();}
\DoxyCodeLine{00307\ }
\DoxyCodeLine{00308\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$sa\ !==\ \textcolor{keyword}{null})\ \{}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$sa-\/>setEtat(\$etat);}
\DoxyCodeLine{00310\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$entityManager-\/>persist(\$sa);}
\DoxyCodeLine{00311\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00312\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00313\ }
\DoxyCodeLine{00314\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Appliquer\ les\ changements\ dans\ la\ base\ de\ données}}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \ \ \$entityManager-\/>flush();}
\DoxyCodeLine{00316\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classApp_1_1Repository_1_1SARepository_a627c48c1362785706d60fd86cfbd2dfe}\label{classApp_1_1Repository_1_1SARepository_a627c48c1362785706d60fd86cfbd2dfe} 
\index{App\textbackslash{}Repository\textbackslash{}SARepository@{App\textbackslash{}Repository\textbackslash{}SARepository}!compteSASansExperimentation@{compteSASansExperimentation}}
\index{compteSASansExperimentation@{compteSASansExperimentation}!App\textbackslash{}Repository\textbackslash{}SARepository@{App\textbackslash{}Repository\textbackslash{}SARepository}}
\doxysubsubsection{\texorpdfstring{compteSASansExperimentation()}{compteSASansExperimentation()}}
{\footnotesize\ttfamily App\textbackslash{}\+Repository\textbackslash{}\+SARepository\+::compte\+SASans\+Experimentation (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Compte le nombre de SA (Système d\textquotesingle{}Automatisation) disponibles sans expérimentation. \begin{DoxyReturn}{Returns}
int Le nombre de SA disponibles. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{SARepository_8php_source_l00039}{39}} of file \mbox{\hyperlink{SARepository_8php_source}{SARepository.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ \textcolor{keywordtype}{int}}
\DoxyCodeLine{00040\ \ \ \ \ \{}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Requête\ pour\ compter\ les\ SA\ sans\ expérimentation.}}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$this-\/>createQueryBuilder(\textcolor{stringliteral}{'sa'})}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \ \ \ \ -\/>select(\textcolor{stringliteral}{'count(sa.id)'})}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \ \ \ \ -\/>where(\textcolor{stringliteral}{'sa.disponible\ =\ 1'})}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \ \ \ \ -\/>getQuery()}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \ \ \ \ -\/>getSingleScalarResult();}
\DoxyCodeLine{00047\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classApp_1_1Repository_1_1SARepository_af1f27e603657272f9de148cc117dd01f}\label{classApp_1_1Repository_1_1SARepository_af1f27e603657272f9de148cc117dd01f} 
\index{App\textbackslash{}Repository\textbackslash{}SARepository@{App\textbackslash{}Repository\textbackslash{}SARepository}!existeDeja@{existeDeja}}
\index{existeDeja@{existeDeja}!App\textbackslash{}Repository\textbackslash{}SARepository@{App\textbackslash{}Repository\textbackslash{}SARepository}}
\doxysubsubsection{\texorpdfstring{existeDeja()}{existeDeja()}}
{\footnotesize\ttfamily App\textbackslash{}\+Repository\textbackslash{}\+SARepository\+::existe\+Deja (\begin{DoxyParamCaption}\item[{string}]{\$nom = {\ttfamily null} }\end{DoxyParamCaption})}

Vérifie l\textquotesingle{}existence d\textquotesingle{}un SA selon son nom. 
\begin{DoxyParams}[1]{Parameters}
string | null & {\em \$nom} & Le nom du SA à vérifier. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
SA\texorpdfstring{$\vert$}{|}null L\textquotesingle{}entité SA si elle existe, sinon null. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{SARepository_8php_source_l00265}{265}} of file \mbox{\hyperlink{SARepository_8php_source}{SARepository.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ ?SA}
\DoxyCodeLine{00266\ \ \ \ \ \{}
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$this-\/>findOneBy([\textcolor{stringliteral}{'nom'}\ =>\ \$nom]);}
\DoxyCodeLine{00268\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classApp_1_1Repository_1_1SARepository_aa3a7b3b4f3ecf780bbfa44293ffd9354}\label{classApp_1_1Repository_1_1SARepository_aa3a7b3b4f3ecf780bbfa44293ffd9354} 
\index{App\textbackslash{}Repository\textbackslash{}SARepository@{App\textbackslash{}Repository\textbackslash{}SARepository}!filtrerSAGestionSA@{filtrerSAGestionSA}}
\index{filtrerSAGestionSA@{filtrerSAGestionSA}!App\textbackslash{}Repository\textbackslash{}SARepository@{App\textbackslash{}Repository\textbackslash{}SARepository}}
\doxysubsubsection{\texorpdfstring{filtrerSAGestionSA()}{filtrerSAGestionSA()}}
{\footnotesize\ttfamily App\textbackslash{}\+Repository\textbackslash{}\+SARepository\+::filtrer\+SAGestion\+SA (\begin{DoxyParamCaption}\item[{array}]{\$etat = {\ttfamily null},  }\item[{array}]{\$localisation = {\ttfamily null} }\end{DoxyParamCaption})}

Filtre les SA selon l\textquotesingle{}état et la localisation spécifiés. 
\begin{DoxyParams}{Parameters}
{\em array$<$int,int$>$\texorpdfstring{$\vert$}{|}null} & \$etat Les états des SA à filtrer. \\
\hline
{\em array$<$int,string$>$\texorpdfstring{$\vert$}{|}null} & \$localisation Les localisations à filtrer. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
array\texorpdfstring{$<$}{<}int, array\{ sa\+\_\+nom\+: string, salle\+\_\+nom\+: string, sa\+\_\+etat\+: Etat\+SA, exp\+\_\+etat\+: Etat\+Experimentation \}\texorpdfstring{$>$}{>} Liste filtrée des SA. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{SARepository_8php_source_l00160}{160}} of file \mbox{\hyperlink{SARepository_8php_source}{SARepository.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ array}
\DoxyCodeLine{00161\ \ \ \ \ \{}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \$exp\ =\ \$this-\/>\mbox{\hyperlink{classApp_1_1Repository_1_1SARepository_a2e1d2cf6f7c95e62ef70727aec1b6216}{toutLesSA}}();}
\DoxyCodeLine{00163\ }
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!empty(\$etat)\ \&\&\ \$etat\ !==\ \textcolor{keyword}{null})\ \{}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \ \ \ \ \$etatsFiltres\ =\ array\_map(\textcolor{keyword}{function}\ (\$one)\ \{}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (\$one)\ \{}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 0:}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ EtatSA::eteint;}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 1:}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ EtatSA::marche;}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 2:}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ EtatSA::probleme;}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{null};}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \ \ \ \ \},\ \$etat);}
\DoxyCodeLine{00177\ }
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ \$exp\ =\ array\_filter(\$exp,\ \textcolor{keyword}{function}\ (\$item)\ use\ (\$etatsFiltres)\ \{}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ in\_array(\$item[\textcolor{stringliteral}{'sa\_etat'}],\ \$etatsFiltres);}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00182\ }
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \$exp\ =\ array\_values(\$exp);}
\DoxyCodeLine{00184\ }
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (count(\$localisation)\ ===\ 1\ \&\&\ \$localisation\ !==\ \textcolor{keyword}{null})\ \{}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$localisation[0]\ ===\ \textcolor{stringliteral}{'salle'})\ \{}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Si\ \$localisation\ est\ true,\ ajouter\ la\ condition\ pour\ salle.nom\ IS\ NOT\ NULL}}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$len\ =\ count(\$exp);}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\$i\ =\ 0;\$i<\$len;\$i++)\{}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\$exp[\$i][\textcolor{stringliteral}{'exp\_etat'}]\ ==\ EtatExperimentation::retiree\ or\ \$exp[\$i][\textcolor{stringliteral}{'salle\_nom'}]\ ==\ \textcolor{keyword}{null})\{}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ unset(\$exp[\$i]);}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ elseif\ (\$localisation[0]\ ===\ \textcolor{stringliteral}{'stock'})\ \{}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Si\ \$localisation\ est\ false,\ ajouter\ la\ condition\ pour\ salle.nom\ IS\ NULL}}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$len\ =\ count(\$exp);}
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\$i\ =\ 0;\$i<\$len;\$i++)\{}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\$exp[\$i][\textcolor{stringliteral}{'exp\_etat'}]\ ==\ EtatExperimentation::installee\ or\ \$exp[\$i][\textcolor{stringliteral}{'exp\_etat'}]\ ==\ EtatExperimentation::demandeInstallation\ or\ \$exp[\$i][\textcolor{stringliteral}{'exp\_etat'}]\ ==\ EtatExperimentation::demandeRetrait\ or\ \$exp[\$i][\textcolor{stringliteral}{'sa\_etat'}]\ !=\ EtatSA::eteint)\{}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ unset(\$exp[\$i]);}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00204\ }
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$exp;}
\DoxyCodeLine{00206\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classApp_1_1Repository_1_1SARepository_a3ce83eb2e12e9eb8d383cbc8a09b7965}\label{classApp_1_1Repository_1_1SARepository_a3ce83eb2e12e9eb8d383cbc8a09b7965} 
\index{App\textbackslash{}Repository\textbackslash{}SARepository@{App\textbackslash{}Repository\textbackslash{}SARepository}!rechercheSA@{rechercheSA}}
\index{rechercheSA@{rechercheSA}!App\textbackslash{}Repository\textbackslash{}SARepository@{App\textbackslash{}Repository\textbackslash{}SARepository}}
\doxysubsubsection{\texorpdfstring{rechercheSA()}{rechercheSA()}}
{\footnotesize\ttfamily App\textbackslash{}\+Repository\textbackslash{}\+SARepository\+::recherche\+SA (\begin{DoxyParamCaption}\item[{string}]{\$contient\+\_\+ce\+\_\+string = {\ttfamily null} }\end{DoxyParamCaption})}

Recherche les SA contenant une chaîne de caractères spécifique dans leur nom ou celui de leur salle associée. 
\begin{DoxyParams}[1]{Parameters}
string | null & {\em \$contient\+\_\+ce\+\_\+string} & La chaîne de caractères à rechercher. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
array\texorpdfstring{$<$}{<}int, array\{ sa\+\_\+nom\+: string, salle\+\_\+nom\+: string, sa\+\_\+etat\+: Etat\+SA, exp\+\_\+etat\+: Etat\+Experimentation \}\texorpdfstring{$>$}{>} Liste des SA correspondants à la recherche. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{SARepository_8php_source_l00218}{218}} of file \mbox{\hyperlink{SARepository_8php_source}{SARepository.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ array}
\DoxyCodeLine{00219\ \ \ \ \ \{}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ \$entityManager\ =\ \$this-\/>getEntityManager();}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \$queryBuilder\ =\ \$entityManager-\/>createQueryBuilder();}
\DoxyCodeLine{00222\ }
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \$queryBuilder-\/>select(\textcolor{stringliteral}{'sa.nom\ as\ sa\_nom'},\ \textcolor{stringliteral}{'salle.nom\ as\ salle\_nom'},\ \textcolor{stringliteral}{'sa.etat\ as\ sa\_etat'},\ \textcolor{stringliteral}{'experimentation.etat\ as\ exp\_etat'})}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \ \ \ \ -\/>from(\textcolor{stringliteral}{'App\(\backslash\)Entity\(\backslash\)SA'},\ \textcolor{stringliteral}{'sa'})}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \ \ \ \ -\/>leftJoin(\textcolor{stringliteral}{'App\(\backslash\)Entity\(\backslash\)Experimentation'},\ \textcolor{stringliteral}{'experimentation'},\ \textcolor{stringliteral}{'WITH'},\ \textcolor{stringliteral}{'sa.id\ =\ experimentation.SA'})}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ \ \ \ \ -\/>leftJoin(\textcolor{stringliteral}{'App\(\backslash\)Entity\(\backslash\)Salle'},\ \textcolor{stringliteral}{'salle'},\ \textcolor{stringliteral}{'WITH'},\ \textcolor{stringliteral}{'experimentation.Salles\ =\ salle.id'})}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \ \ \ \ -\/>where(}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$queryBuilder-\/>expr()-\/>orX(}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$queryBuilder-\/>expr()-\/>like(\textcolor{stringliteral}{'sa.nom'},\ \textcolor{stringliteral}{':contient\_ce\_string'}),}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$queryBuilder-\/>expr()-\/>like(\textcolor{stringliteral}{'salle.nom'},\ \textcolor{stringliteral}{':contient\_ce\_string'})}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \ \ \ \ -\/>setParameter(\textcolor{stringliteral}{'contient\_ce\_string'},\ \textcolor{charliteral}{'\%'}\ .\ \$contient\_ce\_string\ .\ \textcolor{charliteral}{'\%'});}
\DoxyCodeLine{00234\ }
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \$resultat\ =\ \$queryBuilder-\/>getQuery()-\/>getResult();}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \$resultat\ =\ \$this-\/>\mbox{\hyperlink{classApp_1_1Repository_1_1SARepository_a2a7adda15cbf723b9b6c7a693d21fedc}{trierSA}}(\$resultat);}
\DoxyCodeLine{00237\ }
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$resultat;}
\DoxyCodeLine{00239\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classApp_1_1Repository_1_1SARepository_a99f77f946dd0d327313783f9788b3f2c}\label{classApp_1_1Repository_1_1SARepository_a99f77f946dd0d327313783f9788b3f2c} 
\index{App\textbackslash{}Repository\textbackslash{}SARepository@{App\textbackslash{}Repository\textbackslash{}SARepository}!sa\_eteint\_probleme@{sa\_eteint\_probleme}}
\index{sa\_eteint\_probleme@{sa\_eteint\_probleme}!App\textbackslash{}Repository\textbackslash{}SARepository@{App\textbackslash{}Repository\textbackslash{}SARepository}}
\doxysubsubsection{\texorpdfstring{sa\_eteint\_probleme()}{sa\_eteint\_probleme()}}
{\footnotesize\ttfamily App\textbackslash{}\+Repository\textbackslash{}\+SARepository\+::sa\+\_\+eteint\+\_\+probleme (\begin{DoxyParamCaption}\item[{array}]{\$liste\+Salles\+Avec\+Donnees }\end{DoxyParamCaption})}

Met à jour l\textquotesingle{}état des SA en fonction de données spécifiques d\textquotesingle{}expérimentation. 
\begin{DoxyParams}[1]{Parameters}
array & {\em \$liste\+Salles\+Avec\+Donnees} & Les données d\textquotesingle{}expérimentation pour chaque salle. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{SARepository_8php_source_l00352}{352}} of file \mbox{\hyperlink{SARepository_8php_source}{SARepository.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00352\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ \textcolor{keywordtype}{void}\ \{}
\DoxyCodeLine{00353\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{foreach}\ (\$listeSallesAvecDonnees\ as\ \$experimentation)\ \{}
\DoxyCodeLine{00354\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$experimentation[\textcolor{stringliteral}{'dateCapture'}]\ <\ date(\textcolor{stringliteral}{'Y-\/m-\/d\ H:i:s'},\ strtotime(\textcolor{stringliteral}{'-\/10\ minutes'})))\ \{}
\DoxyCodeLine{00355\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$this-\/>\mbox{\hyperlink{classApp_1_1Repository_1_1SARepository_a864e06189eddcaa6061ccaa8ab4ad1bf}{changerEtatSA}}(\$experimentation[\textcolor{stringliteral}{'localisation'}],\ EtatSA::eteint);}
\DoxyCodeLine{00356\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00357\ \ \ \ \ \ \ \ \ \ \ \ \ elseif\ (\$experimentation[\textcolor{stringliteral}{'co2'}]\ ==\ \textcolor{keyword}{null}\ or\ \$experimentation[\textcolor{stringliteral}{'temp'}]\ ==\ \textcolor{keyword}{null}\ or\ \$experimentation[\textcolor{stringliteral}{'hum'}]\ ==\ \textcolor{keyword}{null}\ or\ \$experimentation[\textcolor{stringliteral}{'co2'}]\ <\ 300\ or\ \$experimentation[\textcolor{stringliteral}{'co2'}]\ >\ 5000\ or\ \$experimentation[\textcolor{stringliteral}{'temp'}]\ <\ 0\ or\ \$experimentation[\textcolor{stringliteral}{'temp'}]\ >\ 50\ or\ \$experimentation[\textcolor{stringliteral}{'hum'}]\ <\ 0\ or\ \$experimentation[\textcolor{stringliteral}{'hum'}]\ >\ 100)\ \{}
\DoxyCodeLine{00358\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$this-\/>\mbox{\hyperlink{classApp_1_1Repository_1_1SARepository_a864e06189eddcaa6061ccaa8ab4ad1bf}{changerEtatSA}}(\$experimentation[\textcolor{stringliteral}{'localisation'}],\ EtatSA::probleme);}
\DoxyCodeLine{00359\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00360\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$this-\/>\mbox{\hyperlink{classApp_1_1Repository_1_1SARepository_a864e06189eddcaa6061ccaa8ab4ad1bf}{changerEtatSA}}(\$experimentation[\textcolor{stringliteral}{'localisation'}],\ EtatSA::marche);}
\DoxyCodeLine{00361\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00362\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00363\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classApp_1_1Repository_1_1SARepository_aecb670e0cbff773c408b1d6f63ea0a03}\label{classApp_1_1Repository_1_1SARepository_aecb670e0cbff773c408b1d6f63ea0a03} 
\index{App\textbackslash{}Repository\textbackslash{}SARepository@{App\textbackslash{}Repository\textbackslash{}SARepository}!salle\_associe\_sa@{salle\_associe\_sa}}
\index{salle\_associe\_sa@{salle\_associe\_sa}!App\textbackslash{}Repository\textbackslash{}SARepository@{App\textbackslash{}Repository\textbackslash{}SARepository}}
\doxysubsubsection{\texorpdfstring{salle\_associe\_sa()}{salle\_associe\_sa()}}
{\footnotesize\ttfamily App\textbackslash{}\+Repository\textbackslash{}\+SARepository\+::salle\+\_\+associe\+\_\+sa (\begin{DoxyParamCaption}\item[{string}]{\$nomsa }\end{DoxyParamCaption})}

Trouve les salles associées à un SA donné. 
\begin{DoxyParams}[1]{Parameters}
string & {\em \$nomsa} & Le nom du SA. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
array$<$string, string$>$\texorpdfstring{$\vert$}{|}null Liste des salles associées ou null si aucune salle n\textquotesingle{}est associée. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{SARepository_8php_source_l00323}{323}} of file \mbox{\hyperlink{SARepository_8php_source}{SARepository.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00323\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ ?array}
\DoxyCodeLine{00324\ \ \ \ \ \{}
\DoxyCodeLine{00325\ \ \ \ \ \ \ \ \ \$entityManager\ =\ \$this-\/>getEntityManager();}
\DoxyCodeLine{00326\ \ \ \ \ \ \ \ \ \$queryBuilder\ =\ \$entityManager-\/>createQueryBuilder();}
\DoxyCodeLine{00327\ }
\DoxyCodeLine{00328\ \ \ \ \ \ \ \ \ \$queryBuilder-\/>select(\textcolor{stringliteral}{'salle.nom'})}
\DoxyCodeLine{00329\ \ \ \ \ \ \ \ \ \ \ \ \ -\/>from(\textcolor{stringliteral}{'App\(\backslash\)Entity\(\backslash\)Salle'},\ \textcolor{stringliteral}{'salle'})}
\DoxyCodeLine{00330\ \ \ \ \ \ \ \ \ \ \ \ \ -\/>join(\textcolor{stringliteral}{'App\(\backslash\)Entity\(\backslash\)Experimentation'},\ \textcolor{stringliteral}{'experimentation'},\ \textcolor{stringliteral}{'WITH'},\ \textcolor{stringliteral}{'salle.id\ =\ experimentation.Salles'})}
\DoxyCodeLine{00331\ \ \ \ \ \ \ \ \ \ \ \ \ -\/>join(\textcolor{stringliteral}{'App\(\backslash\)Entity\(\backslash\)SA'},\ \textcolor{stringliteral}{'sa'},\ \textcolor{stringliteral}{'WITH'},\ \textcolor{stringliteral}{'experimentation.SA\ =\ sa.id'})}
\DoxyCodeLine{00332\ \ \ \ \ \ \ \ \ \ \ \ \ -\/>where(\textcolor{stringliteral}{'sa.nom\ =\ :nomsa'})}
\DoxyCodeLine{00333\ \ \ \ \ \ \ \ \ \ \ \ \ -\/>andWhere(\$queryBuilder-\/>expr()-\/>in(\textcolor{stringliteral}{'experimentation.etat'},\ [1,\ 2]))}
\DoxyCodeLine{00334\ \ \ \ \ \ \ \ \ \ \ \ \ -\/>setParameter(\textcolor{stringliteral}{'nomsa'},\ \$nomsa);}
\DoxyCodeLine{00335\ }
\DoxyCodeLine{00336\ \ \ \ \ \ \ \ \ \$result\ =\ \$queryBuilder-\/>getQuery()-\/>getResult();}
\DoxyCodeLine{00337\ }
\DoxyCodeLine{00338\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Si\ le\ résultat\ est\ vide,\ retourner\ null}}
\DoxyCodeLine{00339\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (empty(\$result))\ \{}
\DoxyCodeLine{00340\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{null};}
\DoxyCodeLine{00341\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00342\ }
\DoxyCodeLine{00343\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Sinon,\ retourner\ le\ premier\ élément\ du\ résultat\ sous\ forme\ de\ tableau}}
\DoxyCodeLine{00344\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$result;}
\DoxyCodeLine{00345\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classApp_1_1Repository_1_1SARepository_a70f731d8af704e3efa505a079255ed3c}\label{classApp_1_1Repository_1_1SARepository_a70f731d8af704e3efa505a079255ed3c} 
\index{App\textbackslash{}Repository\textbackslash{}SARepository@{App\textbackslash{}Repository\textbackslash{}SARepository}!saNonUtiliser@{saNonUtiliser}}
\index{saNonUtiliser@{saNonUtiliser}!App\textbackslash{}Repository\textbackslash{}SARepository@{App\textbackslash{}Repository\textbackslash{}SARepository}}
\doxysubsubsection{\texorpdfstring{saNonUtiliser()}{saNonUtiliser()}}
{\footnotesize\ttfamily App\textbackslash{}\+Repository\textbackslash{}\+SARepository\+::sa\+Non\+Utiliser (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Sélectionne le premier SA disponible et le marque comme utilisé. \begin{DoxyReturn}{Returns}
SA\texorpdfstring{$\vert$}{|}null Retourne l\textquotesingle{}entité SA disponible ou null si aucun n\textquotesingle{}est disponible. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{SARepository_8php_source_l00053}{53}} of file \mbox{\hyperlink{SARepository_8php_source}{SARepository.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ ?sa}
\DoxyCodeLine{00054\ \ \ \ \ \{}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Requête\ pour\ sélectionner\ un\ SA\ disponible.}}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \$sa\ =\ \$this-\/>findOneBy([\textcolor{stringliteral}{'disponible'}\ =>\ 1]);}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \$sa-\/>setDisponible(\textcolor{keyword}{false});}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$sa;}
\DoxyCodeLine{00059\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classApp_1_1Repository_1_1SARepository_a801c7dbf106a9f1a800dc4ad2b35499e}\label{classApp_1_1Repository_1_1SARepository_a801c7dbf106a9f1a800dc4ad2b35499e} 
\index{App\textbackslash{}Repository\textbackslash{}SARepository@{App\textbackslash{}Repository\textbackslash{}SARepository}!suppressionExp@{suppressionExp}}
\index{suppressionExp@{suppressionExp}!App\textbackslash{}Repository\textbackslash{}SARepository@{App\textbackslash{}Repository\textbackslash{}SARepository}}
\doxysubsubsection{\texorpdfstring{suppressionExp()}{suppressionExp()}}
{\footnotesize\ttfamily App\textbackslash{}\+Repository\textbackslash{}\+SARepository\+::suppression\+Exp (\begin{DoxyParamCaption}\item[{SA}]{\$sa }\end{DoxyParamCaption})}

Met à jour l\textquotesingle{}état d\textquotesingle{}un SA pour le marquer comme disponible. 
\begin{DoxyParams}[1]{Parameters}
SA & {\em \$sa} & L\textquotesingle{}entité SA à mettre à jour. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{SARepository_8php_source_l00066}{66}} of file \mbox{\hyperlink{SARepository_8php_source}{SARepository.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ \textcolor{keywordtype}{void}}
\DoxyCodeLine{00067\ \ \ \ \ \{}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Mettre\ à\ jour\ l'état\ du\ SA.}}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \$sa-\/>setDisponible(\textcolor{keyword}{true});}
\DoxyCodeLine{00070\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classApp_1_1Repository_1_1SARepository_ad93bff6f868bbd978e5a2edc30b833ad}\label{classApp_1_1Repository_1_1SARepository_ad93bff6f868bbd978e5a2edc30b833ad} 
\index{App\textbackslash{}Repository\textbackslash{}SARepository@{App\textbackslash{}Repository\textbackslash{}SARepository}!supprimerSA@{supprimerSA}}
\index{supprimerSA@{supprimerSA}!App\textbackslash{}Repository\textbackslash{}SARepository@{App\textbackslash{}Repository\textbackslash{}SARepository}}
\doxysubsubsection{\texorpdfstring{supprimerSA()}{supprimerSA()}}
{\footnotesize\ttfamily App\textbackslash{}\+Repository\textbackslash{}\+SARepository\+::supprimer\+SA (\begin{DoxyParamCaption}\item[{string}]{\$nomsa }\end{DoxyParamCaption})}

Supprime un SA spécifié par son nom. 
\begin{DoxyParams}[1]{Parameters}
string & {\em \$nomsa} & Le nom du SA à supprimer. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool True si la suppression est réussie, false sinon. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{SARepository_8php_source_l00275}{275}} of file \mbox{\hyperlink{SARepository_8php_source}{SARepository.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00275\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ \textcolor{keywordtype}{bool}}
\DoxyCodeLine{00276\ \ \ \ \ \{}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \$sa\ =\ \$this-\/>findOneBy([\textcolor{stringliteral}{'nom'}\ =>\ \$nomsa]);}
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$sa)\ \{}
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ \ \ \ \ \$entityManager\ =\ \$this-\/>getEntityManager();}
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Supprimer\ l'objet\ SA}}
\DoxyCodeLine{00281\ \ \ \ \ \ \ \ \ \ \ \ \ \$entityManager-\/>remove(\$sa);}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Exécuter\ les\ changements\ dans\ la\ base\ de\ données}}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \ \ \ \ \$entityManager-\/>flush();}
\DoxyCodeLine{00284\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Retourner\ true\ pour\ indiquer\ que\ la\ suppression\ a\ réussi}}
\DoxyCodeLine{00285\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00286\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00289\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classApp_1_1Repository_1_1SARepository_a2e1d2cf6f7c95e62ef70727aec1b6216}\label{classApp_1_1Repository_1_1SARepository_a2e1d2cf6f7c95e62ef70727aec1b6216} 
\index{App\textbackslash{}Repository\textbackslash{}SARepository@{App\textbackslash{}Repository\textbackslash{}SARepository}!toutLesSA@{toutLesSA}}
\index{toutLesSA@{toutLesSA}!App\textbackslash{}Repository\textbackslash{}SARepository@{App\textbackslash{}Repository\textbackslash{}SARepository}}
\doxysubsubsection{\texorpdfstring{toutLesSA()}{toutLesSA()}}
{\footnotesize\ttfamily App\textbackslash{}\+Repository\textbackslash{}\+SARepository\+::tout\+Les\+SA (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Récupère la liste de tous les SA avec les détails des expérimentations associées. \begin{DoxyReturn}{Returns}
array\texorpdfstring{$<$}{<}int, array\{ sa\+\_\+nom\+: string, salle\+\_\+nom\+: string, sa\+\_\+etat\+: Etat\+SA, exp\+\_\+etat\+: Etat\+Experimentation \}\texorpdfstring{$>$}{>} Liste de tous les SA avec des informations détaillées. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{SARepository_8php_source_l00123}{123}} of file \mbox{\hyperlink{SARepository_8php_source}{SARepository.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ array}
\DoxyCodeLine{00124\ \ \ \ \ \{}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \$entityManager\ =\ \$this-\/>getEntityManager();}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \$queryBuilder\ =\ \$entityManager-\/>createQueryBuilder();}
\DoxyCodeLine{00127\ }
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \$queryBuilder}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \ \ \ \ -\/>select([}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'sa.nom\ as\ sa\_nom'},}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'salle.nom\ as\ salle\_nom'},}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'sa.etat\ as\ sa\_etat'},}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'experimentation.etat\ as\ exp\_etat'}}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \ \ \ \ ])}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \ \ \ \ -\/>from(\textcolor{stringliteral}{'App\(\backslash\)Entity\(\backslash\)SA'},\ \textcolor{stringliteral}{'sa'})}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \ \ \ \ -\/>leftJoin(\textcolor{stringliteral}{'App\(\backslash\)Entity\(\backslash\)Experimentation'},\ \textcolor{stringliteral}{'experimentation'},\ \textcolor{stringliteral}{'WITH'},\ \textcolor{stringliteral}{'sa.id\ =\ experimentation.SA'})}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \ \ \ \ -\/>leftJoin(\textcolor{stringliteral}{'App\(\backslash\)Entity\(\backslash\)Salle'},\ \textcolor{stringliteral}{'salle'},\ \textcolor{stringliteral}{'WITH'},\ \textcolor{stringliteral}{'experimentation.Salles\ =\ salle.id'})}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \ \ \ \ -\/>orderBy(\textcolor{stringliteral}{'sa.nom'},\ \textcolor{stringliteral}{'ASC'});}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Exécuter\ la\ requête}}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \$resultat\ =\ \$queryBuilder-\/>getQuery()-\/>getResult();}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \$resultat\ =\ \$this-\/>\mbox{\hyperlink{classApp_1_1Repository_1_1SARepository_a2a7adda15cbf723b9b6c7a693d21fedc}{trierSA}}(\$resultat);}
\DoxyCodeLine{00144\ }
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Retourner\ true\ si\ une\ expérimentation\ est\ trouvée,\ sinon\ false}}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$resultat;}
\DoxyCodeLine{00147\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classApp_1_1Repository_1_1SARepository_a2a7adda15cbf723b9b6c7a693d21fedc}\label{classApp_1_1Repository_1_1SARepository_a2a7adda15cbf723b9b6c7a693d21fedc} 
\index{App\textbackslash{}Repository\textbackslash{}SARepository@{App\textbackslash{}Repository\textbackslash{}SARepository}!trierSA@{trierSA}}
\index{trierSA@{trierSA}!App\textbackslash{}Repository\textbackslash{}SARepository@{App\textbackslash{}Repository\textbackslash{}SARepository}}
\doxysubsubsection{\texorpdfstring{trierSA()}{trierSA()}}
{\footnotesize\ttfamily App\textbackslash{}\+Repository\textbackslash{}\+SARepository\+::trier\+SA (\begin{DoxyParamCaption}\item[{array}]{\$resultat }\end{DoxyParamCaption})}

Trie et nettoie une liste de SA pour enlever les éléments inutiles. 
\begin{DoxyParams}{Parameters}
{\em array$<$int,array\{} & sa\+\_\+nom\+: string, salle\+\_\+nom\+: string, sa\+\_\+etat\+: Etat\+SA, exp\+\_\+etat\+: Etat\+Experimentation \}\texorpdfstring{$>$}{>} \$resultat La liste des SA à trier.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
array\texorpdfstring{$<$}{<}int, array\{ sa\+\_\+nom\+: string, salle\+\_\+nom\+: string, sa\+\_\+etat\+: Etat\+SA, exp\+\_\+etat\+: Etat\+Experimentation \}\texorpdfstring{$>$}{>} La liste triée des SA. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{SARepository_8php_source_l00088}{88}} of file \mbox{\hyperlink{SARepository_8php_source}{SARepository.\+php}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ array}
\DoxyCodeLine{00089\ \ \ \ \ \{}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{foreach}\ (\$resultat\ as\ \&\$exp)\ \{}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$exp[\textcolor{stringliteral}{'exp\_etat'}]\ ==\ EtatExperimentation::retiree)\ \{}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$exp[\textcolor{stringliteral}{'salle\_nom'}]\ =\ \textcolor{keyword}{null};}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00095\ }
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \$resultat\ =\ array\_values(\$resultat);}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \$len\ =\ count(\$resultat);}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\$i\ =\ 0;\$i<\$len;\$i++)\{}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \ \ \ \ \$nom\_sa\ =\ \$resultat[\$i][\textcolor{stringliteral}{'sa\_nom'}];}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \ \ \ \ \$nombre\_occurrences\ =\ 0;}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{foreach}\ (\$resultat\ as\ \$element)\ \{}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$element[\textcolor{stringliteral}{'sa\_nom'}]\ ===\ \$nom\_sa)\ \{}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$nombre\_occurrences++;}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\$resultat[\$i][\textcolor{stringliteral}{'exp\_etat'}]\ ==\ EtatExperimentation::retiree\ and\ \$resultat[\$i][\textcolor{stringliteral}{'salle\_nom'}]\ ==\ \textcolor{keyword}{null}\ and\ \$nombre\_occurrences\ >=\ 2)\{}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ unset(\$resultat[\$i]);}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \$resultat;}
\DoxyCodeLine{00112\ \ \ \ \ \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
SARepository.\+php\end{DoxyCompactItemize}
