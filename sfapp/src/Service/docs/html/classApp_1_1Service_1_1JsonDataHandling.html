<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Smart Campus L22: App\Service\JsonDataHandling Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Smart Campus L22<span id="projectnumber">&#160;0.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>App</b></li><li class="navelem"><b>Service</b></li><li class="navelem"><a class="el" href="classApp_1_1Service_1_1JsonDataHandling.html">JsonDataHandling</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classApp_1_1Service_1_1JsonDataHandling-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">App\Service\JsonDataHandling Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a6cdb1563da5de7f823110605520d7e8a" id="r_a6cdb1563da5de7f823110605520d7e8a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6cdb1563da5de7f823110605520d7e8a">__construct</a> (ManagerRegistry $managerRegistry)</td></tr>
<tr class="separator:a6cdb1563da5de7f823110605520d7e8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b38cbb7a7254d3067c5a6450804aadc" id="r_a5b38cbb7a7254d3067c5a6450804aadc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5b38cbb7a7254d3067c5a6450804aadc">getSalles</a> ()</td></tr>
<tr class="separator:a5b38cbb7a7254d3067c5a6450804aadc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a680c81f001a8d8f88fc4041955e559ec" id="r_a680c81f001a8d8f88fc4041955e559ec"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a680c81f001a8d8f88fc4041955e559ec">getCaptureData</a> (string $nomsalle, string $type)</td></tr>
<tr class="separator:a680c81f001a8d8f88fc4041955e559ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e74902a0ac751f70a9ee1c8e2c48be3" id="r_a9e74902a0ac751f70a9ee1c8e2c48be3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9e74902a0ac751f70a9ee1c8e2c48be3">getCaptureDataLimited</a> (string $nomsalle, string $type, int $count)</td></tr>
<tr class="separator:a9e74902a0ac751f70a9ee1c8e2c48be3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4843cf6bdf01341d264886f2ef3bce3f" id="r_a4843cf6bdf01341d264886f2ef3bce3f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4843cf6bdf01341d264886f2ef3bce3f">getCaptureDataInterval</a> (string $nomsalle, string $type, string $date1, string $date2)</td></tr>
<tr class="separator:a4843cf6bdf01341d264886f2ef3bce3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c8ef442def904865775eabff168fda6" id="r_a5c8ef442def904865775eabff168fda6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5c8ef442def904865775eabff168fda6">getMoyenneParType</a> (string $type)</td></tr>
<tr class="separator:a5c8ef442def904865775eabff168fda6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe761b724695b8fb4558a45e44a95007" id="r_abe761b724695b8fb4558a45e44a95007"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abe761b724695b8fb4558a45e44a95007">extraireDerniereDonneeSalle</a> (string $nomsalle)</td></tr>
<tr class="separator:abe761b724695b8fb4558a45e44a95007"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60919c23c1865bdcf36502c2d86b0db9" id="r_a60919c23c1865bdcf36502c2d86b0db9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a60919c23c1865bdcf36502c2d86b0db9">extraireToutesLesDonneeActuellesSalle</a> (string $nomsalle, array $date_install)</td></tr>
<tr class="separator:a60919c23c1865bdcf36502c2d86b0db9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbbd7cc60ace29780ee6dcbd7fa50432" id="r_acbbd7cc60ace29780ee6dcbd7fa50432"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acbbd7cc60ace29780ee6dcbd7fa50432">extraireDonneeSurIntervalle</a> (string $nomsalle, DateTime $date_install, DateTime $date_desinstall)</td></tr>
<tr class="separator:acbbd7cc60ace29780ee6dcbd7fa50432"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ce3f8d88a44235a287f24294848ca2b" id="r_a8ce3f8d88a44235a287f24294848ca2b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8ce3f8d88a44235a287f24294848ca2b">extraireDernieresDonneesDesSalles</a> (array $experimentations)</td></tr>
<tr class="separator:a8ce3f8d88a44235a287f24294848ca2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Classe JsonDataHandling pour gérer le traitement des données JSON. Cette classe est responsable de la récupération, du traitement, et de la fourniture de données JSON en provenance de différentes sources, notamment des bases de données et des API externes. </p>

<p class="definition">Definition at line <a class="el" href="JsonDataHandling_8php_source.html#l00020">20</a> of file <a class="el" href="JsonDataHandling_8php_source.html">JsonDataHandling.php</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a6cdb1563da5de7f823110605520d7e8a" name="a6cdb1563da5de7f823110605520d7e8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cdb1563da5de7f823110605520d7e8a">&#9670;&#160;</a></span>__construct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">App\Service\JsonDataHandling::__construct </td>
          <td>(</td>
          <td class="paramtype">ManagerRegistry</td>          <td class="paramname"><span class="paramname"><em>$managerRegistry</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructeur de la classe JsonDataHandling. Initialise les référentiels nécessaires et prépare le tableau des salles.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">ManagerRegistry</td><td class="paramname">$managerRegistry</td><td>Le gestionnaire de registre pour les entités Doctrine. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="JsonDataHandling_8php_source.html#l00041">41</a> of file <a class="el" href="JsonDataHandling_8php_source.html">JsonDataHandling.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   42</span>    {</div>
<div class="line"><span class="lineno">   43</span>        $this-&gt;experimentationRepository = <span class="keyword">new</span> ExperimentationRepository($managerRegistry, <span class="keyword">new</span> SalleRepository($managerRegistry), <span class="keyword">new</span> SARepository($managerRegistry));</div>
<div class="line"><span class="lineno">   44</span>        $this-&gt;salles = [</div>
<div class="line"><span class="lineno">   45</span>            <span class="stringliteral">&quot;D205&quot;</span> =&gt; [<span class="stringliteral">&quot;nomSA&quot;</span> =&gt; <span class="stringliteral">&quot;ESP-001&quot;</span>, <span class="stringliteral">&quot;idSA&quot;</span> =&gt; 1, <span class="stringliteral">&quot;dbname&quot;</span> =&gt; <span class="stringliteral">&quot;sae34bdk1eq1&quot;</span>, <span class="stringliteral">&quot;username&quot;</span> =&gt; <span class="stringliteral">&quot;k1eq1&quot;</span>],</div>
<div class="line"><span class="lineno">   46</span>            <span class="stringliteral">&quot;D206&quot;</span> =&gt; [<span class="stringliteral">&quot;nomSA&quot;</span> =&gt; <span class="stringliteral">&quot;ESP-002&quot;</span>, <span class="stringliteral">&quot;idSA&quot;</span> =&gt; 2, <span class="stringliteral">&quot;dbname&quot;</span> =&gt; <span class="stringliteral">&quot;sae34bdk1eq2&quot;</span>, <span class="stringliteral">&quot;username&quot;</span> =&gt; <span class="stringliteral">&quot;k1eq2&quot;</span>],</div>
<div class="line"><span class="lineno">   47</span>            <span class="stringliteral">&quot;D207&quot;</span> =&gt; [<span class="stringliteral">&quot;nomSA&quot;</span> =&gt; <span class="stringliteral">&quot;ESP-003&quot;</span>, <span class="stringliteral">&quot;idSA&quot;</span> =&gt; 3, <span class="stringliteral">&quot;dbname&quot;</span> =&gt; <span class="stringliteral">&quot;sae34bdk1eq3&quot;</span>, <span class="stringliteral">&quot;username&quot;</span> =&gt; <span class="stringliteral">&quot;k1eq3&quot;</span>],</div>
<div class="line"><span class="lineno">   48</span>            <span class="stringliteral">&quot;D204&quot;</span> =&gt; [<span class="stringliteral">&quot;nomSA&quot;</span> =&gt; <span class="stringliteral">&quot;ESP-004&quot;</span>, <span class="stringliteral">&quot;idSA&quot;</span> =&gt; 4, <span class="stringliteral">&quot;dbname&quot;</span> =&gt; <span class="stringliteral">&quot;sae34bdk2eq1&quot;</span>, <span class="stringliteral">&quot;username&quot;</span> =&gt; <span class="stringliteral">&quot;k2eq1&quot;</span>],</div>
<div class="line"><span class="lineno">   49</span>            <span class="stringliteral">&quot;D203&quot;</span> =&gt; [<span class="stringliteral">&quot;nomSA&quot;</span> =&gt; <span class="stringliteral">&quot;ESP-005&quot;</span>, <span class="stringliteral">&quot;idSA&quot;</span> =&gt; 5, <span class="stringliteral">&quot;dbname&quot;</span> =&gt; <span class="stringliteral">&quot;sae34bdk2eq2&quot;</span>, <span class="stringliteral">&quot;username&quot;</span> =&gt; <span class="stringliteral">&quot;k2eq2&quot;</span>],</div>
<div class="line"><span class="lineno">   50</span>            <span class="stringliteral">&quot;D303&quot;</span> =&gt; [<span class="stringliteral">&quot;nomSA&quot;</span> =&gt; <span class="stringliteral">&quot;ESP-006&quot;</span>, <span class="stringliteral">&quot;idSA&quot;</span> =&gt; 6, <span class="stringliteral">&quot;dbname&quot;</span> =&gt; <span class="stringliteral">&quot;sae34bdk2eq3&quot;</span>, <span class="stringliteral">&quot;username&quot;</span> =&gt; <span class="stringliteral">&quot;k2eq3&quot;</span>],</div>
<div class="line"><span class="lineno">   51</span>            <span class="stringliteral">&quot;D304&quot;</span> =&gt; [<span class="stringliteral">&quot;nomSA&quot;</span> =&gt; <span class="stringliteral">&quot;ESP-007&quot;</span>, <span class="stringliteral">&quot;idSA&quot;</span> =&gt; 7, <span class="stringliteral">&quot;dbname&quot;</span> =&gt; <span class="stringliteral">&quot;sae34bdl1eq1&quot;</span>, <span class="stringliteral">&quot;username&quot;</span> =&gt; <span class="stringliteral">&quot;l1eq1&quot;</span>],</div>
<div class="line"><span class="lineno">   52</span>            <span class="stringliteral">&quot;C101&quot;</span> =&gt; [<span class="stringliteral">&quot;nomSA&quot;</span> =&gt; <span class="stringliteral">&quot;ESP-008&quot;</span>, <span class="stringliteral">&quot;idSA&quot;</span> =&gt; 8, <span class="stringliteral">&quot;dbname&quot;</span> =&gt; <span class="stringliteral">&quot;sae34bdl1eq2&quot;</span>, <span class="stringliteral">&quot;username&quot;</span> =&gt; <span class="stringliteral">&quot;l1eq2&quot;</span>],</div>
<div class="line"><span class="lineno">   53</span>            <span class="stringliteral">&quot;D109&quot;</span> =&gt; [<span class="stringliteral">&quot;nomSA&quot;</span> =&gt; <span class="stringliteral">&quot;ESP-009&quot;</span>, <span class="stringliteral">&quot;idSA&quot;</span> =&gt; 9, <span class="stringliteral">&quot;dbname&quot;</span> =&gt; <span class="stringliteral">&quot;sae34bdl1eq3&quot;</span>, <span class="stringliteral">&quot;username&quot;</span> =&gt; <span class="stringliteral">&quot;l1eq3&quot;</span>],</div>
<div class="line"><span class="lineno">   54</span>            <span class="stringliteral">&quot;D106&quot;</span> =&gt; [<span class="stringliteral">&quot;nomSA&quot;</span> =&gt; <span class="stringliteral">&quot;ESP-010&quot;</span>, <span class="stringliteral">&quot;idSA&quot;</span> =&gt; 10, <span class="stringliteral">&quot;dbname&quot;</span> =&gt; <span class="stringliteral">&quot;sae34bdl2eq1&quot;</span>, <span class="stringliteral">&quot;username&quot;</span> =&gt; <span class="stringliteral">&quot;l2eq1&quot;</span>],</div>
<div class="line"><span class="lineno">   55</span>            <span class="stringliteral">&quot;D001&quot;</span> =&gt; [<span class="stringliteral">&quot;nomSA&quot;</span> =&gt; <span class="stringliteral">&quot;ESP-011&quot;</span>, <span class="stringliteral">&quot;idSA&quot;</span> =&gt; 11, <span class="stringliteral">&quot;dbname&quot;</span> =&gt; <span class="stringliteral">&quot;sae34bdl2eq2&quot;</span>, <span class="stringliteral">&quot;username&quot;</span> =&gt; <span class="stringliteral">&quot;l2eq2&quot;</span>],</div>
<div class="line"><span class="lineno">   56</span>            <span class="stringliteral">&quot;D002&quot;</span> =&gt; [<span class="stringliteral">&quot;nomSA&quot;</span> =&gt; <span class="stringliteral">&quot;ESP-012&quot;</span>, <span class="stringliteral">&quot;idSA&quot;</span> =&gt; 12, <span class="stringliteral">&quot;dbname&quot;</span> =&gt; <span class="stringliteral">&quot;sae34bdl2eq3&quot;</span>, <span class="stringliteral">&quot;username&quot;</span> =&gt; <span class="stringliteral">&quot;l2eq3&quot;</span>],</div>
<div class="line"><span class="lineno">   57</span>            <span class="stringliteral">&quot;D004&quot;</span> =&gt; [<span class="stringliteral">&quot;nomSA&quot;</span> =&gt; <span class="stringliteral">&quot;ESP-013&quot;</span>, <span class="stringliteral">&quot;idSA&quot;</span> =&gt; 13, <span class="stringliteral">&quot;dbname&quot;</span> =&gt; <span class="stringliteral">&quot;sae34bdm1eq1&quot;</span>, <span class="stringliteral">&quot;username&quot;</span> =&gt; <span class="stringliteral">&quot;m1eq1&quot;</span>],</div>
<div class="line"><span class="lineno">   58</span>            <span class="stringliteral">&quot;C004&quot;</span> =&gt; [<span class="stringliteral">&quot;nomSA&quot;</span> =&gt; <span class="stringliteral">&quot;ESP-014&quot;</span>, <span class="stringliteral">&quot;idSA&quot;</span> =&gt; 14, <span class="stringliteral">&quot;dbname&quot;</span> =&gt; <span class="stringliteral">&quot;sae34bdm1eq2&quot;</span>, <span class="stringliteral">&quot;username&quot;</span> =&gt; <span class="stringliteral">&quot;m1eq2&quot;</span>],</div>
<div class="line"><span class="lineno">   59</span>            <span class="stringliteral">&quot;C007&quot;</span> =&gt; [<span class="stringliteral">&quot;nomSA&quot;</span> =&gt; <span class="stringliteral">&quot;ESP-015&quot;</span>, <span class="stringliteral">&quot;idSA&quot;</span> =&gt; 15, <span class="stringliteral">&quot;dbname&quot;</span> =&gt; <span class="stringliteral">&quot;sae34bdm1eq3&quot;</span>, <span class="stringliteral">&quot;username&quot;</span> =&gt; <span class="stringliteral">&quot;m1eq3&quot;</span>],</div>
<div class="line"><span class="lineno">   60</span>            <span class="stringliteral">&quot;D201&quot;</span> =&gt; [<span class="stringliteral">&quot;nomSA&quot;</span> =&gt; <span class="stringliteral">&quot;ESP-016&quot;</span>, <span class="stringliteral">&quot;idSA&quot;</span> =&gt; 16, <span class="stringliteral">&quot;dbname&quot;</span> =&gt; <span class="stringliteral">&quot;sae34bdm2eq1&quot;</span>, <span class="stringliteral">&quot;username&quot;</span> =&gt; <span class="stringliteral">&quot;m2eq1&quot;</span>],</div>
<div class="line"><span class="lineno">   61</span>            <span class="stringliteral">&quot;D307&quot;</span> =&gt; [<span class="stringliteral">&quot;nomSA&quot;</span> =&gt; <span class="stringliteral">&quot;ESP-017&quot;</span>, <span class="stringliteral">&quot;idSA&quot;</span> =&gt; 17, <span class="stringliteral">&quot;dbname&quot;</span> =&gt; <span class="stringliteral">&quot;sae34bdm2eq2&quot;</span>, <span class="stringliteral">&quot;username&quot;</span> =&gt; <span class="stringliteral">&quot;m2eq2&quot;</span>],</div>
<div class="line"><span class="lineno">   62</span>            <span class="stringliteral">&quot;C005&quot;</span> =&gt; [<span class="stringliteral">&quot;nomSA&quot;</span> =&gt; <span class="stringliteral">&quot;ESP-018&quot;</span>, <span class="stringliteral">&quot;idSA&quot;</span> =&gt; 18, <span class="stringliteral">&quot;dbname&quot;</span> =&gt; <span class="stringliteral">&quot;sae34bdm2eq3&quot;</span>, <span class="stringliteral">&quot;username&quot;</span> =&gt; <span class="stringliteral">&quot;m2eq3&quot;</span>]</div>
<div class="line"><span class="lineno">   63</span>        ];</div>
<div class="line"><span class="lineno">   64</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="abe761b724695b8fb4558a45e44a95007" name="abe761b724695b8fb4558a45e44a95007"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe761b724695b8fb4558a45e44a95007">&#9670;&#160;</a></span>extraireDerniereDonneeSalle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">App\Service\JsonDataHandling::extraireDerniereDonneeSalle </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$nomsalle</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Extrait et retourne les dernières données de capture pour une salle donnée.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$nomsalle</td><td>Nom de la salle pour laquelle extraire les données. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array&lt;string, string&gt; Tableau associatif des dernières données de capture pour la salle. </dd></dl>

<p class="definition">Definition at line <a class="el" href="JsonDataHandling_8php_source.html#l00224">224</a> of file <a class="el" href="JsonDataHandling_8php_source.html">JsonDataHandling.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  224</span>                                                                 : array</div>
<div class="line"><span class="lineno">  225</span>    {</div>
<div class="line"><span class="lineno">  226</span>        date_default_timezone_set(<span class="stringliteral">&#39;Europe/Paris&#39;</span>);</div>
<div class="line"><span class="lineno">  227</span> </div>
<div class="line"><span class="lineno">  228</span>        $derniereDonnee = [</div>
<div class="line"><span class="lineno">  229</span>            <span class="stringliteral">&#39;hum&#39;</span> =&gt; <span class="keyword">null</span>,</div>
<div class="line"><span class="lineno">  230</span>            <span class="stringliteral">&#39;temp&#39;</span> =&gt; <span class="keyword">null</span>,</div>
<div class="line"><span class="lineno">  231</span>            <span class="stringliteral">&#39;co2&#39;</span> =&gt; <span class="keyword">null</span>,</div>
<div class="line"><span class="lineno">  232</span>            <span class="stringliteral">&#39;date_de_capture&#39;</span> =&gt; null</div>
<div class="line"><span class="lineno">  233</span>        ];</div>
<div class="line"><span class="lineno">  234</span> </div>
<div class="line"><span class="lineno">  235</span>        $types = [<span class="stringliteral">&#39;hum&#39;</span>, <span class="stringliteral">&#39;temp&#39;</span>, <span class="stringliteral">&#39;co2&#39;</span>];</div>
<div class="line"><span class="lineno">  236</span> </div>
<div class="line"><span class="lineno">  237</span>        <span class="keywordflow">foreach</span> ($types as $type) {</div>
<div class="line"><span class="lineno">  238</span>            $donnees = $this-&gt;<a class="code hl_function" href="#a9e74902a0ac751f70a9ee1c8e2c48be3">getCaptureDataLimited</a>($nomsalle, $type, 1);</div>
<div class="line"><span class="lineno">  239</span> </div>
<div class="line"><span class="lineno">  240</span>            <span class="keywordflow">if</span> (!empty($donnees)) {</div>
<div class="line"><span class="lineno">  241</span>                $derniereDonnee[$type] = $donnees[0][<span class="stringliteral">&#39;valeur&#39;</span>];</div>
<div class="line"><span class="lineno">  242</span> </div>
<div class="line"><span class="lineno">  243</span>                $dateCapture = $donnees[0][<span class="stringliteral">&#39;dateCapture&#39;</span>];</div>
<div class="line"><span class="lineno">  244</span> </div>
<div class="line"><span class="lineno">  245</span>                <span class="comment">// Vérification du format de la date</span></div>
<div class="line"><span class="lineno">  246</span>                <span class="keywordflow">if</span> (preg_match(<span class="stringliteral">&#39;/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$/&#39;</span>, $dateCapture)) {</div>
<div class="line"><span class="lineno">  247</span>                    $dateCaptureObj = new \DateTime($dateCapture);</div>
<div class="line"><span class="lineno">  248</span> </div>
<div class="line"><span class="lineno">  249</span>                    <span class="keywordflow">if</span> ($derniereDonnee[<span class="stringliteral">&#39;date_de_capture&#39;</span>] === <span class="keyword">null</span> || $dateCaptureObj &gt; <span class="keyword">new</span> \DateTime($derniereDonnee[<span class="stringliteral">&#39;date_de_capture&#39;</span>])) {</div>
<div class="line"><span class="lineno">  250</span>                        $derniereDonnee[<span class="stringliteral">&#39;date_de_capture&#39;</span>] = $dateCaptureObj-&gt;format(<span class="stringliteral">&#39;Y-m-d H:i:s&#39;</span>);</div>
<div class="line"><span class="lineno">  251</span>                    }</div>
<div class="line"><span class="lineno">  252</span>                }</div>
<div class="line"><span class="lineno">  253</span>                <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  254</span>                    $derniereDonnee[<span class="stringliteral">&#39;date_de_capture&#39;</span>] = (new \DateTime())-&gt;format(<span class="stringliteral">&#39;Y-m-d H:i:s&#39;</span>);</div>
<div class="line"><span class="lineno">  255</span>                }</div>
<div class="line"><span class="lineno">  256</span>            }</div>
<div class="line"><span class="lineno">  257</span>        }</div>
<div class="line"><span class="lineno">  258</span> </div>
<div class="line"><span class="lineno">  259</span>        <span class="keywordflow">return</span> $derniereDonnee;</div>
<div class="line"><span class="lineno">  260</span>    }</div>
<div class="ttc" id="aclassApp_1_1Service_1_1JsonDataHandling_html_a9e74902a0ac751f70a9ee1c8e2c48be3"><div class="ttname"><a href="#a9e74902a0ac751f70a9ee1c8e2c48be3">App\Service\JsonDataHandling\getCaptureDataLimited</a></div><div class="ttdeci">getCaptureDataLimited(string $nomsalle, string $type, int $count)</div><div class="ttdef"><b>Definition</b> <a href="JsonDataHandling_8php_source.html#l00125">JsonDataHandling.php:125</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8ce3f8d88a44235a287f24294848ca2b" name="a8ce3f8d88a44235a287f24294848ca2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ce3f8d88a44235a287f24294848ca2b">&#9670;&#160;</a></span>extraireDernieresDonneesDesSalles()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">App\Service\JsonDataHandling::extraireDernieresDonneesDesSalles </td>
          <td>(</td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$experimentations</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Extrait les dernières données des salles basées sur les expérimentations données.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">array&lt;int,array{</td><td>nom: string, etage: int, numero: int, orientation: string, nb_fenetres: int, nb_ordis: int, datedemande: DateTime, dateinstallation: DateTime, etat: EtatExperimentation, sa_etat: EtatSA }&gt; $experimentations Tableau des expérimentations pour les salles. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array&lt;int, array{ localisation: string, co2: string, hum: string, temp: string, dateCapture: string }&gt; Tableau des dernières données pour chaque salle. </dd></dl>

<p class="definition">Definition at line <a class="el" href="JsonDataHandling_8php_source.html#l00378">378</a> of file <a class="el" href="JsonDataHandling_8php_source.html">JsonDataHandling.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  378</span>                                                                              : array</div>
<div class="line"><span class="lineno">  379</span>    {</div>
<div class="line"><span class="lineno">  380</span>        $resultats = [];</div>
<div class="line"><span class="lineno">  381</span> </div>
<div class="line"><span class="lineno">  382</span>        <span class="keywordflow">if</span> (!empty($experimentations))</div>
<div class="line"><span class="lineno">  383</span>        {</div>
<div class="line"><span class="lineno">  384</span>            <span class="keywordflow">foreach</span> ($experimentations as $experimentation) {</div>
<div class="line"><span class="lineno">  385</span>                $nomsalle = $experimentation[<span class="stringliteral">&#39;nom&#39;</span>];</div>
<div class="line"><span class="lineno">  386</span> </div>
<div class="line"><span class="lineno">  387</span>                $derniereDonnee = $this-&gt;<a class="code hl_function" href="#abe761b724695b8fb4558a45e44a95007">extraireDerniereDonneeSalle</a>($nomsalle);</div>
<div class="line"><span class="lineno">  388</span> </div>
<div class="line"><span class="lineno">  389</span>                <span class="comment">// Si des données ont été trouvées pour la salle</span></div>
<div class="line"><span class="lineno">  390</span>                <span class="keywordflow">if</span> ($derniereDonnee[<span class="stringliteral">&#39;date_de_capture&#39;</span>] !== <span class="keyword">null</span>) {</div>
<div class="line"><span class="lineno">  391</span>                    $resultats[] = [</div>
<div class="line"><span class="lineno">  392</span>                        <span class="stringliteral">&#39;localisation&#39;</span> =&gt; $nomsalle,</div>
<div class="line"><span class="lineno">  393</span>                        <span class="stringliteral">&#39;co2&#39;</span> =&gt; $derniereDonnee[<span class="stringliteral">&#39;co2&#39;</span>],</div>
<div class="line"><span class="lineno">  394</span>                        <span class="stringliteral">&#39;hum&#39;</span> =&gt; $derniereDonnee[<span class="stringliteral">&#39;hum&#39;</span>],</div>
<div class="line"><span class="lineno">  395</span>                        <span class="stringliteral">&#39;temp&#39;</span> =&gt; $derniereDonnee[<span class="stringliteral">&#39;temp&#39;</span>],</div>
<div class="line"><span class="lineno">  396</span>                        <span class="stringliteral">&#39;dateCapture&#39;</span> =&gt; $derniereDonnee[<span class="stringliteral">&#39;date_de_capture&#39;</span>]</div>
<div class="line"><span class="lineno">  397</span>                    ];</div>
<div class="line"><span class="lineno">  398</span>                }</div>
<div class="line"><span class="lineno">  399</span>            }</div>
<div class="line"><span class="lineno">  400</span>        }</div>
<div class="line"><span class="lineno">  401</span>        <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  402</span>            <span class="keywordflow">foreach</span> ($this-&gt;salles as $nomsalle =&gt; $infosalle){</div>
<div class="line"><span class="lineno">  403</span>                $derniereDonnee = $this-&gt;<a class="code hl_function" href="#abe761b724695b8fb4558a45e44a95007">extraireDerniereDonneeSalle</a>($nomsalle);</div>
<div class="line"><span class="lineno">  404</span> </div>
<div class="line"><span class="lineno">  405</span>                <span class="comment">// Si des données ont été trouvées pour la salle</span></div>
<div class="line"><span class="lineno">  406</span>                <span class="keywordflow">if</span> ($derniereDonnee[<span class="stringliteral">&#39;date_de_capture&#39;</span>] !== <span class="keyword">null</span>) {</div>
<div class="line"><span class="lineno">  407</span>                    $resultats[] = [</div>
<div class="line"><span class="lineno">  408</span>                        <span class="stringliteral">&#39;localisation&#39;</span> =&gt; $nomsalle,</div>
<div class="line"><span class="lineno">  409</span>                        <span class="stringliteral">&#39;co2&#39;</span> =&gt; $derniereDonnee[<span class="stringliteral">&#39;co2&#39;</span>],</div>
<div class="line"><span class="lineno">  410</span>                        <span class="stringliteral">&#39;hum&#39;</span> =&gt; $derniereDonnee[<span class="stringliteral">&#39;hum&#39;</span>],</div>
<div class="line"><span class="lineno">  411</span>                        <span class="stringliteral">&#39;temp&#39;</span> =&gt; $derniereDonnee[<span class="stringliteral">&#39;temp&#39;</span>],</div>
<div class="line"><span class="lineno">  412</span>                        <span class="stringliteral">&#39;dateCapture&#39;</span> =&gt; $derniereDonnee[<span class="stringliteral">&#39;date_de_capture&#39;</span>]</div>
<div class="line"><span class="lineno">  413</span>                    ];</div>
<div class="line"><span class="lineno">  414</span>                }</div>
<div class="line"><span class="lineno">  415</span>            }</div>
<div class="line"><span class="lineno">  416</span>        }</div>
<div class="line"><span class="lineno">  417</span> </div>
<div class="line"><span class="lineno">  418</span> </div>
<div class="line"><span class="lineno">  419</span>        <span class="keywordflow">return</span> $resultats;</div>
<div class="line"><span class="lineno">  420</span>    }</div>
<div class="ttc" id="aclassApp_1_1Service_1_1JsonDataHandling_html_abe761b724695b8fb4558a45e44a95007"><div class="ttname"><a href="#abe761b724695b8fb4558a45e44a95007">App\Service\JsonDataHandling\extraireDerniereDonneeSalle</a></div><div class="ttdeci">extraireDerniereDonneeSalle(string $nomsalle)</div><div class="ttdef"><b>Definition</b> <a href="JsonDataHandling_8php_source.html#l00224">JsonDataHandling.php:224</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acbbd7cc60ace29780ee6dcbd7fa50432" name="acbbd7cc60ace29780ee6dcbd7fa50432"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbbd7cc60ace29780ee6dcbd7fa50432">&#9670;&#160;</a></span>extraireDonneeSurIntervalle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">App\Service\JsonDataHandling::extraireDonneeSurIntervalle </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$nomsalle</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DateTime</td>          <td class="paramname"><span class="paramname"><em>$date_install</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DateTime</td>          <td class="paramname"><span class="paramname"><em>$date_desinstall</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Extrait et retourne les données de capture pour une salle donnée sur un intervalle de temps spécifique.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$nomsalle</td><td>Nom de la salle. </td></tr>
    <tr><td class="paramtype">DateTime</td><td class="paramname">$date_install</td><td>Date de début de l'intervalle. </td></tr>
    <tr><td class="paramtype">DateTime</td><td class="paramname">$date_desinstall</td><td>Date de fin de l'intervalle. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array&lt;int, array{ date: string, temp: string, hum: string, co2: string }&gt; Tableau des données de capture pour la salle et l'intervalle spécifiés. </dd></dl>

<p class="definition">Definition at line <a class="el" href="JsonDataHandling_8php_source.html#l00321">321</a> of file <a class="el" href="JsonDataHandling_8php_source.html">JsonDataHandling.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  321</span>                                                                                                                    : array</div>
<div class="line"><span class="lineno">  322</span>    {</div>
<div class="line"><span class="lineno">  323</span>        $dateInstallString = $date_install-&gt;format(<span class="stringliteral">&#39;Y-m-d&#39;</span>);</div>
<div class="line"><span class="lineno">  324</span>        $dateDesinstallString = $date_desinstall-&gt;format(<span class="stringliteral">&#39;Y-m-d&#39;</span>);</div>
<div class="line"><span class="lineno">  325</span> </div>
<div class="line"><span class="lineno">  326</span>        $types = [<span class="stringliteral">&#39;hum&#39;</span>, <span class="stringliteral">&#39;temp&#39;</span>, <span class="stringliteral">&#39;co2&#39;</span>]; <span class="comment">// Types de données à récupérer</span></div>
<div class="line"><span class="lineno">  327</span>        $groupedData = [];</div>
<div class="line"><span class="lineno">  328</span> </div>
<div class="line"><span class="lineno">  329</span>        <span class="keywordflow">foreach</span> ($types as $type) {</div>
<div class="line"><span class="lineno">  330</span>            <span class="comment">// Remplacez cette partie par l&#39;appel à votre API</span></div>
<div class="line"><span class="lineno">  331</span>            $data = $this-&gt;<a class="code hl_function" href="#a4843cf6bdf01341d264886f2ef3bce3f">getCaptureDataInterval</a>($nomsalle, $type, $dateInstallString, $dateDesinstallString);</div>
<div class="line"><span class="lineno">  332</span> </div>
<div class="line"><span class="lineno">  333</span>            <span class="keywordflow">foreach</span> ($data as $entry) {</div>
<div class="line"><span class="lineno">  334</span>                $date = $entry[<span class="stringliteral">&#39;dateCapture&#39;</span>];</div>
<div class="line"><span class="lineno">  335</span>                <span class="keywordflow">if</span> (!isset($groupedData[$date])) {</div>
<div class="line"><span class="lineno">  336</span>                    $groupedData[$date] = [</div>
<div class="line"><span class="lineno">  337</span>                        <span class="stringliteral">&#39;date&#39;</span> =&gt; $date,</div>
<div class="line"><span class="lineno">  338</span>                        <span class="stringliteral">&#39;temp&#39;</span> =&gt; <span class="keyword">null</span>,</div>
<div class="line"><span class="lineno">  339</span>                        <span class="stringliteral">&#39;hum&#39;</span> =&gt; <span class="keyword">null</span>,</div>
<div class="line"><span class="lineno">  340</span>                        <span class="stringliteral">&#39;co2&#39;</span> =&gt; <span class="keyword">null</span>,</div>
<div class="line"><span class="lineno">  341</span>                    ];</div>
<div class="line"><span class="lineno">  342</span>                }</div>
<div class="line"><span class="lineno">  343</span>                $groupedData[$date][$type] = $entry[<span class="stringliteral">&#39;valeur&#39;</span>];</div>
<div class="line"><span class="lineno">  344</span>            }</div>
<div class="line"><span class="lineno">  345</span>        }</div>
<div class="line"><span class="lineno">  346</span> </div>
<div class="line"><span class="lineno">  347</span>        <span class="comment">// Tri par date et conversion en tableau indexé</span></div>
<div class="line"><span class="lineno">  348</span>        uasort($groupedData, <span class="keyword">function</span> ($a, $b) {</div>
<div class="line"><span class="lineno">  349</span>            <span class="keywordflow">return</span> new \DateTime($b[<span class="stringliteral">&#39;date&#39;</span>]) &lt;=&gt; new \DateTime($a[<span class="stringliteral">&#39;date&#39;</span>]);</div>
<div class="line"><span class="lineno">  350</span>        });</div>
<div class="line"><span class="lineno">  351</span> </div>
<div class="line"><span class="lineno">  352</span>        <span class="keywordflow">return</span> array_values($groupedData);</div>
<div class="line"><span class="lineno">  353</span>    }</div>
<div class="ttc" id="aclassApp_1_1Service_1_1JsonDataHandling_html_a4843cf6bdf01341d264886f2ef3bce3f"><div class="ttname"><a href="#a4843cf6bdf01341d264886f2ef3bce3f">App\Service\JsonDataHandling\getCaptureDataInterval</a></div><div class="ttdeci">getCaptureDataInterval(string $nomsalle, string $type, string $date1, string $date2)</div><div class="ttdef"><b>Definition</b> <a href="JsonDataHandling_8php_source.html#l00158">JsonDataHandling.php:158</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a60919c23c1865bdcf36502c2d86b0db9" name="a60919c23c1865bdcf36502c2d86b0db9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60919c23c1865bdcf36502c2d86b0db9">&#9670;&#160;</a></span>extraireToutesLesDonneeActuellesSalle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">App\Service\JsonDataHandling::extraireToutesLesDonneeActuellesSalle </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$nomsalle</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$date_install</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Extrait et retourne toutes les données de capture actuelles pour une salle donnée.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$nomsalle</td><td>Nom de la salle. </td></tr>
    <tr><td class="paramtype"></td><td class="paramname">array&lt;string,DateTime&gt;</td><td>$date_install Date d'installation pour le filtre des données. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array&lt;int, array{ date: string, temp: string, hum: string, co2: string }&gt; Tableau des données de capture pour la salle. </dd></dl>

<p class="definition">Definition at line <a class="el" href="JsonDataHandling_8php_source.html#l00274">274</a> of file <a class="el" href="JsonDataHandling_8php_source.html">JsonDataHandling.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  274</span>                                                                                                : array</div>
<div class="line"><span class="lineno">  275</span>    {</div>
<div class="line"><span class="lineno">  276</span>        $dateInstallString = $date_install[<span class="stringliteral">&#39;date_install&#39;</span>]-&gt;format(<span class="stringliteral">&#39;Y-m-d&#39;</span>);</div>
<div class="line"><span class="lineno">  277</span>        $dateActuelle = new \DateTime();</div>
<div class="line"><span class="lineno">  278</span>        $dateActuelleString = $dateActuelle-&gt;format(<span class="stringliteral">&#39;Y-m-d&#39;</span>);</div>
<div class="line"><span class="lineno">  279</span> </div>
<div class="line"><span class="lineno">  280</span>        $types = [<span class="stringliteral">&#39;hum&#39;</span>, <span class="stringliteral">&#39;temp&#39;</span>, <span class="stringliteral">&#39;co2&#39;</span>];</div>
<div class="line"><span class="lineno">  281</span>        $groupedData = [];</div>
<div class="line"><span class="lineno">  282</span> </div>
<div class="line"><span class="lineno">  283</span>        <span class="keywordflow">foreach</span> ($types as $type) {</div>
<div class="line"><span class="lineno">  284</span>            $data = $this-&gt;<a class="code hl_function" href="#a4843cf6bdf01341d264886f2ef3bce3f">getCaptureDataInterval</a>($nomsalle, $type, $dateInstallString, $dateActuelleString);</div>
<div class="line"><span class="lineno">  285</span> </div>
<div class="line"><span class="lineno">  286</span>            <span class="keywordflow">foreach</span> ($data as $entry) {</div>
<div class="line"><span class="lineno">  287</span>                $date = $entry[<span class="stringliteral">&#39;dateCapture&#39;</span>];</div>
<div class="line"><span class="lineno">  288</span>                <span class="keywordflow">if</span> (!isset($groupedData[$date])) {</div>
<div class="line"><span class="lineno">  289</span>                    $groupedData[$date] = [</div>
<div class="line"><span class="lineno">  290</span>                        <span class="stringliteral">&#39;date&#39;</span> =&gt; $date,</div>
<div class="line"><span class="lineno">  291</span>                        <span class="stringliteral">&#39;temp&#39;</span> =&gt; <span class="keyword">null</span>,</div>
<div class="line"><span class="lineno">  292</span>                        <span class="stringliteral">&#39;hum&#39;</span> =&gt; <span class="keyword">null</span>,</div>
<div class="line"><span class="lineno">  293</span>                        <span class="stringliteral">&#39;co2&#39;</span> =&gt; <span class="keyword">null</span>,</div>
<div class="line"><span class="lineno">  294</span>                    ];</div>
<div class="line"><span class="lineno">  295</span>                }</div>
<div class="line"><span class="lineno">  296</span>                $groupedData[$date][$type] = $entry[<span class="stringliteral">&#39;valeur&#39;</span>];</div>
<div class="line"><span class="lineno">  297</span>            }</div>
<div class="line"><span class="lineno">  298</span>        }</div>
<div class="line"><span class="lineno">  299</span> </div>
<div class="line"><span class="lineno">  300</span>        <span class="comment">// Tri par date et conversion en tableau indexé</span></div>
<div class="line"><span class="lineno">  301</span>        uasort($groupedData, <span class="keyword">function</span> ($a, $b) {</div>
<div class="line"><span class="lineno">  302</span>            <span class="keywordflow">return</span> new \DateTime($b[<span class="stringliteral">&#39;date&#39;</span>]) &lt;=&gt; new \DateTime($a[<span class="stringliteral">&#39;date&#39;</span>]);</div>
<div class="line"><span class="lineno">  303</span>        });</div>
<div class="line"><span class="lineno">  304</span> </div>
<div class="line"><span class="lineno">  305</span>        <span class="keywordflow">return</span> array_values($groupedData);</div>
<div class="line"><span class="lineno">  306</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a680c81f001a8d8f88fc4041955e559ec" name="a680c81f001a8d8f88fc4041955e559ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a680c81f001a8d8f88fc4041955e559ec">&#9670;&#160;</a></span>getCaptureData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">App\Service\JsonDataHandling::getCaptureData </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$nomsalle</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$type</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Récupère les données de capture pour une salle donnée.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$nomsalle</td><td>Le nom de la salle. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$type</td><td>Le type de données à récupérer (temp, hum, etc.). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>mixed Les données de capture sous forme de tableau ou autre format. </dd></dl>

<p class="definition">Definition at line <a class="el" href="JsonDataHandling_8php_source.html#l00094">94</a> of file <a class="el" href="JsonDataHandling_8php_source.html">JsonDataHandling.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   94</span>                                                                  : mixed</div>
<div class="line"><span class="lineno">   95</span>    {</div>
<div class="line"><span class="lineno">   96</span>        $nomSA = $this-&gt;salles[$nomsalle][<span class="stringliteral">&#39;nomSA&#39;</span>];</div>
<div class="line"><span class="lineno">   97</span>        $dbname = $this-&gt;salles[$nomsalle][<span class="stringliteral">&#39;dbname&#39;</span>];</div>
<div class="line"><span class="lineno">   98</span> </div>
<div class="line"><span class="lineno">   99</span>        $client = <span class="keyword">new</span> Client();</div>
<div class="line"><span class="lineno">  100</span>        $response = $client-&gt;request(<span class="stringliteral">&#39;GET&#39;</span>, <span class="stringliteral">&#39;https://sae34.k8s.iut-larochelle.fr/api/captures&#39;</span>, [</div>
<div class="line"><span class="lineno">  101</span>            <span class="stringliteral">&#39;query&#39;</span> =&gt; [</div>
<div class="line"><span class="lineno">  102</span>                <span class="stringliteral">&#39;nom&#39;</span> =&gt; $type,</div>
<div class="line"><span class="lineno">  103</span>                <span class="stringliteral">&#39;nomsa&#39;</span> =&gt; $nomSA,</div>
<div class="line"><span class="lineno">  104</span>                <span class="stringliteral">&#39;page&#39;</span> =&gt; 1</div>
<div class="line"><span class="lineno">  105</span>            ],</div>
<div class="line"><span class="lineno">  106</span>            <span class="stringliteral">&#39;headers&#39;</span> =&gt; [</div>
<div class="line"><span class="lineno">  107</span>                <span class="stringliteral">&#39;accept&#39;</span> =&gt; <span class="stringliteral">&#39;application/json&#39;</span>,</div>
<div class="line"><span class="lineno">  108</span>                <span class="stringliteral">&#39;dbname&#39;</span> =&gt; $dbname,</div>
<div class="line"><span class="lineno">  109</span>                <span class="stringliteral">&#39;username&#39;</span> =&gt; <span class="stringliteral">&#39;l2eq2&#39;</span>,</div>
<div class="line"><span class="lineno">  110</span>                <span class="stringliteral">&#39;userpass&#39;</span> =&gt; <span class="stringliteral">&#39;wiqnyt-fuqgyc-7vUhby&#39;</span></div>
<div class="line"><span class="lineno">  111</span>            ]</div>
<div class="line"><span class="lineno">  112</span>        ]);</div>
<div class="line"><span class="lineno">  113</span> </div>
<div class="line"><span class="lineno">  114</span>        <span class="keywordflow">return</span> json_decode($response-&gt;getBody(), <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  115</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4843cf6bdf01341d264886f2ef3bce3f" name="a4843cf6bdf01341d264886f2ef3bce3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4843cf6bdf01341d264886f2ef3bce3f">&#9670;&#160;</a></span>getCaptureDataInterval()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">App\Service\JsonDataHandling::getCaptureDataInterval </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$nomsalle</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$type</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$date1</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$date2</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Récupère les données de capture pour une salle et un type de mesure sur un intervalle de temps donné.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$nomsalle</td><td>Nom de la salle. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$type</td><td>Type de données à récupérer. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$date1</td><td>Date de début de l'intervalle. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$date2</td><td>Date de fin de l'intervalle. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>mixed Les données de capture sous forme de tableau ou autre format. </dd></dl>

<p class="definition">Definition at line <a class="el" href="JsonDataHandling_8php_source.html#l00158">158</a> of file <a class="el" href="JsonDataHandling_8php_source.html">JsonDataHandling.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  158</span>                                                                                                        : mixed</div>
<div class="line"><span class="lineno">  159</span>    {</div>
<div class="line"><span class="lineno">  160</span>        $dbname = $this-&gt;salles[$nomsalle][<span class="stringliteral">&#39;dbname&#39;</span>];</div>
<div class="line"><span class="lineno">  161</span> </div>
<div class="line"><span class="lineno">  162</span>        $client = <span class="keyword">new</span> Client();</div>
<div class="line"><span class="lineno">  163</span>        $response = $client-&gt;request(<span class="stringliteral">&#39;GET&#39;</span>, <span class="stringliteral">&#39;https://sae34.k8s.iut-larochelle.fr/api/captures/interval&#39;</span>, [</div>
<div class="line"><span class="lineno">  164</span>            <span class="stringliteral">&#39;query&#39;</span> =&gt; [</div>
<div class="line"><span class="lineno">  165</span>                <span class="stringliteral">&#39;nom&#39;</span> =&gt; $type,</div>
<div class="line"><span class="lineno">  166</span>                <span class="stringliteral">&#39;date1&#39;</span> =&gt; $date1,</div>
<div class="line"><span class="lineno">  167</span>                <span class="stringliteral">&#39;date2&#39;</span> =&gt; $date2,</div>
<div class="line"><span class="lineno">  168</span>                <span class="stringliteral">&#39;page&#39;</span> =&gt; 1</div>
<div class="line"><span class="lineno">  169</span>            ],</div>
<div class="line"><span class="lineno">  170</span>            <span class="stringliteral">&#39;headers&#39;</span> =&gt; [</div>
<div class="line"><span class="lineno">  171</span>                <span class="stringliteral">&#39;accept&#39;</span> =&gt; <span class="stringliteral">&#39;application/json&#39;</span>,</div>
<div class="line"><span class="lineno">  172</span>                <span class="stringliteral">&#39;dbname&#39;</span> =&gt; $dbname,</div>
<div class="line"><span class="lineno">  173</span>                <span class="stringliteral">&#39;username&#39;</span> =&gt; <span class="stringliteral">&#39;l2eq2&#39;</span>,</div>
<div class="line"><span class="lineno">  174</span>                <span class="stringliteral">&#39;userpass&#39;</span> =&gt; <span class="stringliteral">&#39;wiqnyt-fuqgyc-7vUhby&#39;</span></div>
<div class="line"><span class="lineno">  175</span>            ]</div>
<div class="line"><span class="lineno">  176</span>        ]);</div>
<div class="line"><span class="lineno">  177</span> </div>
<div class="line"><span class="lineno">  178</span>        <span class="keywordflow">return</span> json_decode($response-&gt;getBody(), <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  179</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a9e74902a0ac751f70a9ee1c8e2c48be3" name="a9e74902a0ac751f70a9ee1c8e2c48be3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e74902a0ac751f70a9ee1c8e2c48be3">&#9670;&#160;</a></span>getCaptureDataLimited()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">App\Service\JsonDataHandling::getCaptureDataLimited </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$nomsalle</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$type</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>$count</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Récupère une quantité limitée de données de capture pour une salle et un type de mesure spécifiques.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$nomsalle</td><td>Nom de la salle. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$type</td><td>Type de données à récupérer. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$count</td><td>Nombre de données à récupérer. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>mixed Les données de capture sous forme de tableau ou autre format. </dd></dl>

<p class="definition">Definition at line <a class="el" href="JsonDataHandling_8php_source.html#l00125">125</a> of file <a class="el" href="JsonDataHandling_8php_source.html">JsonDataHandling.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  125</span>                                                                                     : mixed</div>
<div class="line"><span class="lineno">  126</span>    {</div>
<div class="line"><span class="lineno">  127</span>        $nomSA = $this-&gt;salles[$nomsalle][<span class="stringliteral">&#39;nomSA&#39;</span>];</div>
<div class="line"><span class="lineno">  128</span>        $dbname = $this-&gt;salles[$nomsalle][<span class="stringliteral">&#39;dbname&#39;</span>];</div>
<div class="line"><span class="lineno">  129</span> </div>
<div class="line"><span class="lineno">  130</span>        $client = <span class="keyword">new</span> Client();</div>
<div class="line"><span class="lineno">  131</span>        $response = $client-&gt;request(<span class="stringliteral">&#39;GET&#39;</span>, <span class="stringliteral">&#39;https://sae34.k8s.iut-larochelle.fr/api/captures/last&#39;</span>, [</div>
<div class="line"><span class="lineno">  132</span>            <span class="stringliteral">&#39;query&#39;</span> =&gt; [</div>
<div class="line"><span class="lineno">  133</span>                <span class="stringliteral">&#39;nom&#39;</span> =&gt; $type,</div>
<div class="line"><span class="lineno">  134</span>                <span class="stringliteral">&#39;nomsa&#39;</span> =&gt; $nomSA,</div>
<div class="line"><span class="lineno">  135</span>                <span class="stringliteral">&#39;limit&#39;</span> =&gt; $count,</div>
<div class="line"><span class="lineno">  136</span>                <span class="stringliteral">&#39;page&#39;</span> =&gt; 1</div>
<div class="line"><span class="lineno">  137</span>            ],</div>
<div class="line"><span class="lineno">  138</span>            <span class="stringliteral">&#39;headers&#39;</span> =&gt; [</div>
<div class="line"><span class="lineno">  139</span>                <span class="stringliteral">&#39;accept&#39;</span> =&gt; <span class="stringliteral">&#39;application/json&#39;</span>,</div>
<div class="line"><span class="lineno">  140</span>                <span class="stringliteral">&#39;dbname&#39;</span> =&gt; $dbname,</div>
<div class="line"><span class="lineno">  141</span>                <span class="stringliteral">&#39;username&#39;</span> =&gt; <span class="stringliteral">&#39;l2eq2&#39;</span>,</div>
<div class="line"><span class="lineno">  142</span>                <span class="stringliteral">&#39;userpass&#39;</span> =&gt; <span class="stringliteral">&#39;wiqnyt-fuqgyc-7vUhby&#39;</span></div>
<div class="line"><span class="lineno">  143</span>            ]</div>
<div class="line"><span class="lineno">  144</span>        ]);</div>
<div class="line"><span class="lineno">  145</span> </div>
<div class="line"><span class="lineno">  146</span>        <span class="keywordflow">return</span> json_decode($response-&gt;getBody(), <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  147</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5c8ef442def904865775eabff168fda6" name="a5c8ef442def904865775eabff168fda6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c8ef442def904865775eabff168fda6">&#9670;&#160;</a></span>getMoyenneParType()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">App\Service\JsonDataHandling::getMoyenneParType </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$type</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Calcule et retourne la moyenne des valeurs de capture pour un type de mesure donné.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$type</td><td>Type de données pour lequel calculer la moyenne (température, humidité, etc.). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>float La moyenne calculée pour le type de données spécifié. </dd></dl>

<p class="definition">Definition at line <a class="el" href="JsonDataHandling_8php_source.html#l00187">187</a> of file <a class="el" href="JsonDataHandling_8php_source.html">JsonDataHandling.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  187</span>                                                   : <span class="keywordtype">float</span></div>
<div class="line"><span class="lineno">  188</span>    {</div>
<div class="line"><span class="lineno">  189</span>        $somme = 0;</div>
<div class="line"><span class="lineno">  190</span>        $count = 0;</div>
<div class="line"><span class="lineno">  191</span> </div>
<div class="line"><span class="lineno">  192</span>        <span class="keywordflow">foreach</span> ($this-&gt;salles as $nomSalle =&gt; $infoSalle) {</div>
<div class="line"><span class="lineno">  193</span>            $donnee = $this-&gt;<a class="code hl_function" href="#a9e74902a0ac751f70a9ee1c8e2c48be3">getCaptureDataLimited</a>($nomSalle, $type, 1);</div>
<div class="line"><span class="lineno">  194</span> </div>
<div class="line"><span class="lineno">  195</span>            <span class="comment">//dump($donnee);</span></div>
<div class="line"><span class="lineno">  196</span> </div>
<div class="line"><span class="lineno">  197</span>            <span class="keywordflow">if</span> (!empty($donnee) &amp;&amp; isset($donnee[0][<span class="stringliteral">&#39;valeur&#39;</span>]) &amp;&amp; $donnee[0][<span class="stringliteral">&#39;valeur&#39;</span>] !== <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno">  198</span>            {</div>
<div class="line"><span class="lineno">  199</span>                <span class="comment">//dump($donnee[0][&#39;valeur&#39;]);</span></div>
<div class="line"><span class="lineno">  200</span>                $somme += floatval($donnee[0][<span class="stringliteral">&#39;valeur&#39;</span>]);</div>
<div class="line"><span class="lineno">  201</span>                $count++;</div>
<div class="line"><span class="lineno">  202</span>            }</div>
<div class="line"><span class="lineno">  203</span>        }</div>
<div class="line"><span class="lineno">  204</span> </div>
<div class="line"><span class="lineno">  205</span>        $moyenneGlobale = $somme / $count;</div>
<div class="line"><span class="lineno">  206</span> </div>
<div class="line"><span class="lineno">  207</span>        <span class="keywordflow">if</span> ($type === <span class="stringliteral">&quot;hum&quot;</span> || $type === <span class="stringliteral">&quot;temp&quot;</span>)</div>
<div class="line"><span class="lineno">  208</span>        {</div>
<div class="line"><span class="lineno">  209</span>            $moyenneGlobale = round($moyenneGlobale, 1);</div>
<div class="line"><span class="lineno">  210</span>        }</div>
<div class="line"><span class="lineno">  211</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  212</span>        {</div>
<div class="line"><span class="lineno">  213</span>            $moyenneGlobale = round($moyenneGlobale);</div>
<div class="line"><span class="lineno">  214</span>        }</div>
<div class="line"><span class="lineno">  215</span>        <span class="keywordflow">return</span> $moyenneGlobale;</div>
<div class="line"><span class="lineno">  216</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5b38cbb7a7254d3067c5a6450804aadc" name="a5b38cbb7a7254d3067c5a6450804aadc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b38cbb7a7254d3067c5a6450804aadc">&#9670;&#160;</a></span>getSalles()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">App\Service\JsonDataHandling::getSalles </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Récupère les informations des salles. Cette méthode filtre et retourne les informations pertinentes des salles.</p>
<dl class="section return"><dt>Returns</dt><dd>array Tableau contenant les informations des salles. </dd></dl>

<p class="definition">Definition at line <a class="el" href="JsonDataHandling_8php_source.html#l00072">72</a> of file <a class="el" href="JsonDataHandling_8php_source.html">JsonDataHandling.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   72</span>                               : array</div>
<div class="line"><span class="lineno">   73</span>    {</div>
<div class="line"><span class="lineno">   74</span>        $listeSalles = [];</div>
<div class="line"><span class="lineno">   75</span>        $listeExperimentations = $this-&gt;experimentationRepository-&gt;enleveExperimentationsInutiles($this-&gt;experimentationRepository-&gt;requeteCommune()-&gt;getQuery()-&gt;getResult());</div>
<div class="line"><span class="lineno">   76</span>        <span class="keywordflow">foreach</span> ($listeExperimentations as $experimentation) {</div>
<div class="line"><span class="lineno">   77</span>            $nomSalle = $experimentation[<span class="stringliteral">&#39;nom&#39;</span>];</div>
<div class="line"><span class="lineno">   78</span>            <span class="keywordflow">foreach</span> ($this-&gt;salles as $nomSalle2 =&gt; $infoSalle) {</div>
<div class="line"><span class="lineno">   79</span>                <span class="keywordflow">if</span> ($nomSalle === $nomSalle2) {</div>
<div class="line"><span class="lineno">   80</span>                    $listeSalles[$nomSalle] = $infoSalle;</div>
<div class="line"><span class="lineno">   81</span>                }</div>
<div class="line"><span class="lineno">   82</span>            }</div>
<div class="line"><span class="lineno">   83</span>        }</div>
<div class="line"><span class="lineno">   84</span>        <span class="keywordflow">return</span> $listeSalles;</div>
<div class="line"><span class="lineno">   85</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="JsonDataHandling_8php_source.html">JsonDataHandling.php</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
